



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>笔记 C语言 - 学习笔记</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="学习笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              学习笔记
            </span>
            <span class="md-header-nav__topic">
              
                笔记 C语言
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="学习笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    学习笔记
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="主页" class="md-nav__link">
      主页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ElasticSearch/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../JavaScript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../MySQL/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../人工智能/" title="人工智能" class="md-nav__link">
      人工智能
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../LEK/" title="LEK" class="md-nav__link">
      LEK
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../设计模式/" title="设计模式" class="md-nav__link">
      设计模式
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../前端/" title="前端" class="md-nav__link">
      前端
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    简介
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    环境
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    常用指令
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c" class="md-nav__link">
    C程序
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    代码分布在多个源文件
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    头文件与函数定义分离
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#makefile" class="md-nav__link">
    Makefile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mainreturn" class="md-nav__link">
    main函数中的return
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main" class="md-nav__link">
    main函数中的参数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    标准输入流输出流以及错误流
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    标准输入输出流以及错误流重定向
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    管道原理及应用
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>笔记 C语言</h1>
                
                <p>C语言 </p>
<h2 id="_1">简介</h2>
<p>C语言的标准：ANSI C</p>
<p>C语言的特点：</p>
<ul>
<li>简单</li>
<li>快速</li>
<li>高性能</li>
<li>兼容性好</li>
<li>功能强大</li>
<li>易于学习</li>
</ul>
<p>C语言的应用：<br />
1、Linux嵌入式（小工具）（C语言小巧灵活、语法简单、适合做小工具）<br />
linux/unix系统就是由各种各样的小工具集成得来的。</p>
<p>2、和硬件打交道的程序<br />
a、操作系统：苹果系统，安卓系统，windoows<br />
b、ARM嵌入式、单片机、Arduino</p>
<p>3、有高性能要求的应用程序<br />
著名的WEB服务器，NGINX=apache*10</p>
<h2 id="_2">环境</h2>
<ul>
<li>centos <a href="https://www.centos.org/">https://www.centos.org/</a></li>
<li>ubuntu <a href="https://ubuntu.com/">https://ubuntu.com/</a></li>
</ul>
<h2 id="_3">常用指令</h2>
<div class="codehilite"><pre><span></span><span class="c1"># ubuntu 安装vim编辑器</span>
$ apt-get update
$ apt-get install vim

<span class="c1"># 编译器</span>
$ cc -v
$ gcc -v
</pre></div>


<p>VIM命令模式</p>
<div class="codehilite"><pre><span></span><span class="n">i</span>    <span class="err">（插入模式</span> <span class="err">或</span> <span class="err">当前光标前插入字符）</span>
<span class="n">Esc</span>     <span class="err">（返回命令行模式）</span>
<span class="p">:</span><span class="n">w</span>    <span class="err">（保存）</span>
<span class="n">a</span>    <span class="err">（当前光标后插入字符）</span>
<span class="p">:</span><span class="n">q</span>     <span class="err">（退出</span><span class="n">VIM</span><span class="err">）</span>
<span class="n">Shitf</span> <span class="o">+</span> <span class="n">a</span>   <span class="err">（在行尾插入字符）</span>
<span class="n">Shift</span> <span class="o">+</span> <span class="n">i</span>   <span class="err">（在行手插入字符）</span>
<span class="n">o</span>      <span class="err">（下一行插入字符）</span>
<span class="n">Shift</span> <span class="o">+</span> <span class="n">o</span>   <span class="err">（在当前行上行插入字符）</span>
<span class="n">x</span>     <span class="err">（删除单个字符）</span>
<span class="n">dd</span>    <span class="err">（删除整行字符）</span>
</pre></div>


<h2 id="c">C程序</h2>
<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>编译执行</p>
<div class="codehilite"><pre><span></span><span class="c1"># 编译</span>
$ cc hello.c 
<span class="c1"># 或者</span>
$ gcc hello.c

<span class="c1"># 执行</span>
$ ./a.out
</pre></div>


<h2 id="_4">代码分布在多个源文件</h2>
<p>1、放在一个文件</p>
<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // 系统目录中查找</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
    <span class="c1">// max value is 2</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>编译执行 执行输出文件，默认是<code>a.out</code></p>
<div class="codehilite"><pre><span></span>$ gcc hello.c -o hello.out

$ ./hello.out
</pre></div>


<p>2、放在多个文件</p>
<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // 系统目录中查找</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
    <span class="c1">// max value is 2</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>max.c</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>多文件编译执行</p>
<div class="codehilite"><pre><span></span>$ gcc max.c hello.c -o hello.out

$ ./hello.out
</pre></div>


<p>此时会有警告</p>
<p>3、声明引用</p>
<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // 系统目录中查找</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;max.c&quot;    // 相对目录中查找</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
    <span class="c1">// max value is 2</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>编译执行</p>
<div class="codehilite"><pre><span></span>$ gcc hello.c -o hello.out

$ ./hello.out
</pre></div>


<h2 id="_5">头文件与函数定义分离</h2>
<p>1、两个文件分别编译</p>
<p>gcc参数:</p>
<div class="codehilite"><pre><span></span><span class="o">-</span><span class="k">c</span> <span class="n">compile</span> <span class="err">只编译源文件但不链接</span> <span class="o">*</span><span class="p">.</span><span class="n">o</span>
<span class="o">-</span><span class="n">o</span> <span class="k">out</span> <span class="err">指定输出文件名</span> <span class="err">默认</span><span class="n">a</span><span class="p">.</span><span class="k">out</span>
</pre></div>


<p>分开编译需要注释include</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // 系统目录中查找</span><span class="cp"></span>
<span class="c1">// #include &quot;max.c&quot;    // 相对目录中查找</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
    <span class="c1">// max value is 2</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>编译源文件</p>
<div class="codehilite"><pre><span></span><span class="c1"># 先编译max.c文件</span>
$ gcc -c max.c -o max.o

<span class="c1"># 再编译hello.c文件</span>
$ gcc max.o hello.c
</pre></div>


<p>2、三个文件分别编译</p>
<p>min.c</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">min</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">maxValue</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">minValue</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;min value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">minValue</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># 编译min.c</span>
$ gcc -c min.c

<span class="c1"># 编译hello.c</span>
$ gcc min.o max.o hello.c -o hello.out
</pre></div>


<p>3、引入头文件</p>
<p>min.h</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">min</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</pre></div>


<p>max.h</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</pre></div>


<p>hello.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;  // 系统目录中查找</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;min.h&quot;    // 引入头文件</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;max.h&quot;    </span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">maxValue</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;max value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">minValue</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;min value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">minValue</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>编译执行</p>
<div class="codehilite"><pre><span></span>$ gcc min.o max.o hello.c -o hello.out

$ ./hello.out
</pre></div>


<h2 id="makefile">Makefile</h2>
<div class="codehilite"><pre><span></span><span class="c1"># 删除所有.o结尾的文件</span>
$ rm *.o
</pre></div>


<p>make工具可以将大型的开发项目分成若干个模块</p>
<p>make内部使用了gcc</p>
<div class="codehilite"><pre><span></span>$ apt-get install make

$ make -v
</pre></div>


<p>Makefile 使用<tab>缩进</p>
<div class="codehilite"><pre><span></span><span class="c1"># 注释</span>
hello.out:max.o min.o hello.c
    gcc max.o min.o hello.c -o hello.out
max.o:max.c
    gcc -c max.c
min.o:min.c
    gcc -c min.c
</pre></div>


<p>执行编译</p>
<div class="codehilite"><pre><span></span>$ make
</pre></div>


<h2 id="mainreturn">main函数中的return</h2>
<p>main.c</p>
<div class="codehilite"><pre><span></span><span class="cp"># include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argv</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argc</span><span class="p">[]){</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>查看程序返回</p>
<div class="codehilite"><pre><span></span><span class="c1"># 编译并执行程序</span>
gcc main.c -o main.out <span class="o">&amp;&amp;</span> ./main.out

<span class="c1"># 查看程序运行结果</span>
$ <span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>


<h2 id="main">main函数中的参数</h2>
<p>main.c</p>
<div class="codehilite"><pre><span></span><span class="cp"># include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argv</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argc</span><span class="p">[]){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argv</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;argc[%d]=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">argc</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<div class="codehilite"><pre><span></span>$ ./main.out name age
argc<span class="o">[</span><span class="m">0</span><span class="o">]=</span>./main.out
argc<span class="o">[</span><span class="m">1</span><span class="o">]=</span>name
argc<span class="o">[</span><span class="m">2</span><span class="o">]=</span>age
</pre></div>


<p>argv 参数的个数<br />
argc 参数的内容</p>
<h2 id="_6">标准输入流输出流以及错误流</h2>
<div class="codehilite"><pre><span></span><span class="cp"># include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// 接收输入</span>
    <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

    <span class="c1">// 输出数据</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;input value is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">stdin</span>  <span class="err">标准输入</span> <span class="n">eg</span><span class="p">:</span> <span class="err">键盘输入</span>
<span class="k">stdout</span> <span class="err">标准输出</span> <span class="n">eg</span><span class="p">:</span> <span class="err">终端输出</span>
<span class="n">stderr</span> <span class="err">标准错误</span> <span class="n">eg</span><span class="p">:</span> <span class="err">错误输出</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="cp"># include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// printf(&quot;please input a value\n&quot;);</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">&quot;please input a value</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
    <span class="c1">// scanf(&quot;%d&quot;, &amp;a);</span>
    <span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;the value must &gt; 0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h2 id="_7">标准输入输出流以及错误流重定向</h2>
<p>加法计算器小程序</p>
<p>接收两个输入，计算两个数字的和，并输出</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span><span class="p">;</span> 
    <span class="kt">int</span> <span class="n">b</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;input a:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;input b:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;a + b = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>1、输出流重定向</p>
<div class="codehilite"><pre><span></span><span class="c1"># 追加</span>
$ ./mian.out <span class="m">1</span>&gt;&gt; a.txt 

<span class="c1"># 或者</span>
$ ./mian.out &gt;&gt; a.txt 

<span class="c1"># 覆盖</span>
$ ./mian.out &gt; a.txt  
</pre></div>


<p>输出结果 a.txt</p>
<div class="codehilite"><pre><span></span><span class="k">input</span> <span class="n">a</span><span class="p">:</span>
<span class="k">input</span> <span class="n">b</span><span class="p">:</span>
<span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>


<p>2、输入流重定向</p>
<p>输入文件 input.txt</p>
<div class="codehilite"><pre><span></span><span class="mi">3</span>
<span class="mi">4</span>
</pre></div>


<div class="codehilite"><pre><span></span>$ ./main.out &lt; input.txt
input a:
input b:
a + <span class="nv">b</span> <span class="o">=</span> <span class="m">7</span>
</pre></div>


<p>3、错误流重定向</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;input value:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;value %d &gt; 0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;value %d &lt; 0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<div class="codehilite"><pre><span></span>$ ./main.out <span class="m">1</span>&gt;stdout.txt <span class="m">2</span>&gt;stderr.txt
</pre></div>


<p>4、同时操作标准输入、标准输出、错误流<br />
stdin.txt</p>
<div class="codehilite"><pre><span></span><span class="o">-</span><span class="mi">10</span>
</pre></div>


<p>执行程序</p>
<div class="codehilite"><pre><span></span>$ ./main.out <span class="m">1</span>&gt;stdout.txt <span class="m">2</span>&gt;stderr.txt &lt; stdin.txt
</pre></div>


<p>stdout.txt</p>
<div class="codehilite"><pre><span></span><span class="k">input</span> <span class="n">value</span><span class="p">:</span>
</pre></div>


<p>stderr.txt</p>
<div class="codehilite"><pre><span></span><span class="n">value</span> <span class="o">-</span><span class="mi">10</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</pre></div>


<h2 id="_8">管道原理及应用</h2>
<p>前一个命令的输出，作为后一个命令的输入</p>
<div class="codehilite"><pre><span></span><span class="c1"># 查看当前目录下文件</span>
ls

<span class="c1"># 查看根目录下文件</span>
ls / 

<span class="c1"># 查看/etc目录下文件</span>
ls /etc

<span class="c1"># 在/etc目录下查找包含ab字符的文件名</span>
ls /etc <span class="p">|</span> grep ab

<span class="c1"># 查询进程</span>
ps -e <span class="p">|</span> grep ssh
</pre></div>


<p>sum.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="cm">/**</span>
<span class="cm">对输入求和，并输出求和结果和输入个数</span>
<span class="cm">格式：sum:count</span>
<span class="cm">eg: 400,2</span>
<span class="cm">*/</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">var</span><span class="p">;</span>

    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">var</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">var</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
            <span class="n">sum</span> <span class="o">+=</span> <span class="n">var</span><span class="p">;</span>
            <span class="n">count</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d,%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">sum</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>avg.c</p>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cm">/**</span>
<span class="cm">对输入计算平均值</span>
<span class="cm">格式：sum,count</span>
<span class="cm">eg: 500,2</span>
<span class="cm">输出：250.000</span>
<span class="cm">*/</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">int</span> <span class="n">sum</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>

    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sum</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>

    <span class="kt">float</span> <span class="n">avg</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">count</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">avg</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>input.txt</p>
<div class="codehilite"><pre><span></span><span class="mi">500</span>
<span class="mi">400</span>
<span class="mi">600</span>
<span class="mi">0</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1"># 编译</span>
$ gcc sum.c -o sum.out
$ gcc avg.c -o avg.out

<span class="c1"># 通过重定向输入和管道处理，先求和再计算平均值</span>
$ ./sum.out &lt; input.txt <span class="p">|</span> ./avg.out
<span class="m">500</span>.000000
</pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2019-2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/mouday" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>