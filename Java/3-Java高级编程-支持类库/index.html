



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>12 章 ： 开发支持类库 - 学习笔记</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#12" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="学习笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              学习笔记
            </span>
            <span class="md-header-nav__topic">
              
                12 章 ： 开发支持类库
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="学习笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    学习笔记
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="主页" class="md-nav__link">
      主页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../ElasticSearch/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../JavaScript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../MySQL/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../人工智能/" title="人工智能" class="md-nav__link">
      人工智能
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../LEK/" title="LEK" class="md-nav__link">
      LEK
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../设计模式/" title="设计模式" class="md-nav__link">
      设计模式
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#47-uuid" class="md-nav__link">
    47 UUID类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#48-optional" class="md-nav__link">
    48 Optional类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#49-threadlocal" class="md-nav__link">
    49 ThreadLocal类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50" class="md-nav__link">
    50 定时调度
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#51-base64" class="md-nav__link">
    51 Base64加密与解密
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="12">12 章 ： 开发支持类库</h1>
<h2 id="47-uuid">47 UUID类</h2>
<p>UUID 根据时间戳实现自动无重复字符串定义</p>
<div class="codehilite"><pre><span></span><span class="c1">// 获取UUID</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">UUID</span> <span class="nf">randomUUID</span><span class="o">()</span>

<span class="c1">// 根据字符串获取UUID</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">UUID</span> <span class="nf">fromString</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span>
</pre></div>


<p>应用：对文件进行自动命名处理</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">());</span>
        <span class="c1">// 85a8ccb1-88f8-4b3c-833d-d45b58e0204e</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">&quot;85a8ccb1-88f8-4b3c-833d-d45b58e0204e&quot;</span><span class="o">));</span>
        <span class="c1">// 85a8ccb1-88f8-4b3c-833d-d45b58e0204e</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="48-optional">48 Optional类</h2>
<p>Optional 主要功能是进行null空指针处理<br />
JDK &gt;= 1.8</p>
<p>示例：单独处理null参数</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Message</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Message</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">showMessage</span><span class="o">(</span><span class="n">Message</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">message</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Message</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Message</span><span class="o">(</span><span class="s">&quot;这是消息&quot;</span><span class="o">);</span>
        <span class="n">showMessage</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>

        <span class="n">showMessage</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>几个方法</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>

     <span class="kd">public</span> <span class="kd">static</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">empty</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;unchecked&quot;</span><span class="o">)</span>
        <span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="o">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;)</span> <span class="n">EMPTY</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">of</span><span class="o">(</span><span class="n">T</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Optional</span><span class="o">&lt;&gt;(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

     <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">ofNullable</span><span class="o">(</span><span class="n">T</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">empty</span><span class="o">()</span> <span class="o">:</span> <span class="n">of</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">T</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">NoSuchElementException</span><span class="o">(</span><span class="s">&quot;No value present&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">T</span> <span class="nf">orElse</span><span class="o">(</span><span class="n">T</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">value</span> <span class="o">:</span> <span class="n">other</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>使用示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * 存入</span>
<span class="cm">*/</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optOf</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">);</span>
<span class="c1">// Optional&lt;String&gt; optOfNull = Optional.of(null);</span>
<span class="c1">// java.lang.NullPointerException</span>

<span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optOfNullable</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">);</span>
<span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optOfNullableNull</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>


<span class="cm">/**</span>
<span class="cm"> * 取出</span>
<span class="cm">*/</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">optOf</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
<span class="c1">// message</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">optOfNullable</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
<span class="c1">// message</span>

<span class="c1">// System.out.println(optOfNullableNull.get());</span>
<span class="c1">// java.util.NoSuchElementException: No value present</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">optOf</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">&quot;default&quot;</span><span class="o">));</span>
<span class="c1">// message</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">optOfNullable</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">&quot;default&quot;</span><span class="o">));</span>
<span class="c1">// message</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">optOfNullableNull</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">&quot;default&quot;</span><span class="o">));</span>
<span class="c1">// default</span>
</pre></div>


<p>自定义函数实现</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getDefault</span><span class="o">(</span><span class="n">String</span> <span class="n">object</span><span class="o">,</span> <span class="n">String</span> <span class="n">defaultValue</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">object</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">object</span> <span class="o">:</span> <span class="n">defaultValue</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getDefault</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">,</span> <span class="s">&quot;default&quot;</span><span class="o">));</span>
        <span class="c1">// message</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">getDefault</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">&quot;default&quot;</span><span class="o">));</span>
        <span class="c1">// default</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="49-threadlocal">49 ThreadLocal类</h2>
<p>ThreadLocal解决线程同步问题</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="n">T</span> <span class="nf">get</span><span class="o">()</span> 
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">set</span><span class="o">(</span><span class="n">T</span> <span class="n">value</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span>
</pre></div>


<p>定义发送消息类</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Message</span><span class="o">{</span>
    <span class="kd">private</span>  <span class="n">String</span> <span class="n">message</span> <span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Message</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Channel</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Message</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">){</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>


<p>单线程下运行</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Message</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Message</span><span class="o">(</span><span class="s">&quot;你好&quot;</span><span class="o">);</span>
        <span class="n">Chanel</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="n">Chanel</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
        <span class="c1">// 你好</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>多线程下运行，出现数据覆盖现象</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">Thread</span><span class="o">(()-&gt;{</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">Message</span><span class="o">(</span><span class="s">&quot;你好-1&quot;</span><span class="o">));</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
        <span class="o">},</span> <span class="s">&quot;线程-1&quot;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

        <span class="k">new</span> <span class="n">Thread</span><span class="o">(()-&gt;{</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">Message</span><span class="o">(</span><span class="s">&quot;你好-2&quot;</span><span class="o">));</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
        <span class="o">},</span> <span class="s">&quot;线程-2&quot;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

        <span class="k">new</span> <span class="n">Thread</span><span class="o">(()-&gt;{</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">Message</span><span class="o">(</span><span class="s">&quot;你好-3&quot;</span><span class="o">));</span>
            <span class="n">Channel</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
        <span class="o">},</span> <span class="s">&quot;线程-3&quot;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="cm">/**</span>
<span class="cm">         * 线程-2 你好-3</span>
<span class="cm">         * 线程-1 你好-1</span>
<span class="cm">         * 线程-3 你好-3</span>
<span class="cm">         */</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>改造 Channel</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Channel</span><span class="o">{</span>

    <span class="c1">// private static Message message;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ThreadLocal</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&gt;</span> <span class="n">THREAD_LOCAL</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">ThreadLocal</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&gt;();</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">){</span>
        <span class="n">THREAD_LOCAL</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span>
                <span class="o">+</span> <span class="s">&quot; &quot;</span>
                <span class="o">+</span> <span class="n">THREAD_LOCAL</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>    
<span class="o">}</span>

<span class="c1">// 执行后数据对应</span>
<span class="cm">/**</span>

<span class="cm">线程-2 你好-2</span>
<span class="cm">线程-1 你好-1</span>
<span class="cm">线程-3 你好-3</span>
<span class="cm">*/</span>
</pre></div>


<p>ThreadLocal， 只允许保存一个数据</p>
<h2 id="50">50 定时调度</h2>
<p>定时器进行定时任务处理，实现了一种间隔触发操作</p>
<p>java.util.TimerTask  定时任务处理 <br />
java.util.Timer      任务启动</p>
<div class="codehilite"><pre><span></span><span class="c1">// 定时启动</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">schedule</span><span class="o">(</span><span class="n">TimerTask</span> <span class="n">task</span><span class="o">,</span> <span class="kt">long</span> <span class="n">delay</span><span class="o">)</span>

<span class="c1">// 间隔任务</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">scheduleAtFixedRate</span><span class="o">(</span><span class="n">TimerTask</span> <span class="n">task</span><span class="o">,</span> <span class="kt">long</span> <span class="n">delay</span><span class="o">,</span> <span class="kt">long</span> <span class="n">period</span><span class="o">)</span>
</pre></div>


<p>定义任务</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.TimerTask</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">MyTask</span> <span class="kd">extends</span> <span class="n">TimerTask</span><span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;任务启动 &quot;</span> <span class="o">+</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>示例：定时启动，会卡主</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Timer</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">();</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">schedule</span><span class="o">(</span><span class="k">new</span> <span class="n">MyTask</span><span class="o">(),</span> <span class="mi">100</span><span class="o">);</span>
        <span class="c1">// 任务启动 1574260837613</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>示例：间隔任务</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">();</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">scheduleAtFixedRate</span><span class="o">(</span><span class="k">new</span> <span class="n">MyTask</span><span class="o">(),</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="51-base64">51 Base64加密与解密</h2>
<p>加密解密示例</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Hello Java&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">encodeMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encode</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">encodeMessage</span><span class="o">);</span>
<span class="c1">// SGVsbG8gSmF2YQ==</span>

<span class="n">String</span> <span class="n">decodeMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">Base64</span><span class="o">.</span><span class="na">getDecoder</span><span class="o">().</span><span class="na">decode</span><span class="o">(</span><span class="n">encodeMessage</span><span class="o">));</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">decodeMessage</span><span class="o">);</span>
<span class="c1">// Hello Java</span>
</pre></div>


<p>最好的方法是使用2-3中加密程序，进行多次加密</p>
<p>加密解密示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Crypto</span><span class="o">{</span>
    <span class="c1">// 加密重复次数，越高越安全</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">REPEAT</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * 加密处理</span>
<span class="cm">     * @param message</span>
<span class="cm">     * @return</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">encode</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
        <span class="kt">byte</span><span class="o">[]</span>  <span class="n">data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>

        <span class="c1">// 重复加密</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">REPEAT</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">getEncoder</span><span class="o">().</span><span class="na">encode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">decode</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">REPEAT</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">getDecoder</span><span class="o">().</span><span class="na">decode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Hello Java&quot;</span><span class="o">;</span>

        <span class="n">String</span> <span class="n">encodeMessage</span> <span class="o">=</span> <span class="n">Crypto</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">encodeMessage</span><span class="o">);</span>
        <span class="c1">// VTBkV2MySkhPR2RUYlVZeVdWRTlQUT09</span>

        <span class="n">String</span> <span class="n">decodeMessage</span> <span class="o">=</span> <span class="n">Crypto</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">encodeMessage</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">decodeMessage</span><span class="o">);</span>
        <span class="c1">// Hello Java</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h1 id="13">第13 章 ： 比较器</h1>
<h2 id="52">52 比较器问题引出</h2>
<p>比较器：大小关系判断</p>
<p>示例：对象数组排序</p>
<div class="codehilite"><pre><span></span><span class="n">Integer</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">};</span>
<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
<span class="c1">// [1, 4, 5, 6, 8]</span>
</pre></div>


<h2 id="53-comparable">53 Comparable比较器</h2>
<p>接口：Comparable</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">T</span> <span class="n">o</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>大于返回正数<br />
等于返回0<br />
小于返回负数</p>
<p>示例：自定义类型数组排序</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span> <span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Person</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Person{&quot;</span> <span class="o">+</span>
                <span class="s">&quot;name=&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                <span class="s">&quot;, age=&quot;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span>
                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Person</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="o">{</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小王&quot;</span><span class="o">,</span> <span class="mi">23</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小刘&quot;</span><span class="o">,</span> <span class="mi">27</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小张&quot;</span><span class="o">,</span> <span class="mi">25</span><span class="o">),</span>
        <span class="o">};</span>

        <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
        <span class="c1">// [</span>
        <span class="c1">// Person{name=&#39;小王&#39;, age=23}, </span>
        <span class="c1">// Person{name=&#39;小张&#39;, age=25}, </span>
        <span class="c1">// Person{name=&#39;小刘&#39;, age=27}</span>
        <span class="c1">// ]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="54-comparator">54 Comparator比较器</h2>
<p>解决没有实现Comparable接口的对象比较</p>
<div class="codehilite"><pre><span></span><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">T</span> <span class="n">o1</span><span class="o">,</span> <span class="n">T</span> <span class="n">o2</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>排序方法</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">Object</span><span class="o">[]</span> <span class="n">a</span><span class="o">)</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">a</span><span class="o">,</span> <span class="n">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span>
</pre></div>


<p>使用示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Comparator</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Person</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span> <span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Person{&quot;</span> <span class="o">+</span>
                <span class="s">&quot;name=&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                <span class="s">&quot;, age=&quot;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span>
                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">PersonComparator</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Person</span> <span class="n">person1</span><span class="o">,</span> <span class="n">Person</span> <span class="n">person2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">person1</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">-</span> <span class="n">person2</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Person</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="o">{</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小王&quot;</span><span class="o">,</span> <span class="mi">23</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小刘&quot;</span><span class="o">,</span> <span class="mi">27</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小张&quot;</span><span class="o">,</span> <span class="mi">25</span><span class="o">),</span>
        <span class="o">};</span>

        <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="k">new</span> <span class="n">PersonComparator</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
        <span class="c1">// [</span>
        <span class="c1">// Person{name=&#39;小王&#39;, age=23},</span>
        <span class="c1">// Person{name=&#39;小张&#39;, age=25},</span>
        <span class="c1">// Person{name=&#39;小刘&#39;, age=27}</span>
        <span class="c1">// ]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Comparable优先使用</p>
<p>区别 Comparable Comparator<br />
Comparable 定义类的时候实现父接口，定义排序规则</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">T</span> <span class="n">o</span><span class="o">)</span>
</pre></div>


<p>Comparator 挽救的比较器操作，需要单独设置比较规则实现排序</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">T</span> <span class="n">o1</span><span class="o">,</span> <span class="n">T</span> <span class="n">o2</span><span class="o">);</span>
</pre></div>


<p>可以使用匿名类</p>
<div class="codehilite"><pre><span></span><span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Person</span> <span class="n">o1</span><span class="o">,</span> <span class="n">Person</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">o1</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">-</span> <span class="n">o2</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>


<p>也可以使用Lambda表达式</p>
<div class="codehilite"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">comparator</span> <span class="o">=</span> <span class="o">(</span><span class="n">Person</span> <span class="n">o1</span><span class="o">,</span> <span class="n">Person</span> <span class="n">o2</span><span class="o">)-&gt;{</span>
    <span class="k">return</span> <span class="n">o1</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">-</span> <span class="n">o2</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
<span class="o">};</span>

<span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">comparator</span><span class="o">);</span>
</pre></div>


<p>或者</p>
<div class="codehilite"><pre><span></span><span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="o">(</span><span class="n">p1</span><span class="o">,</span> <span class="n">p2</span><span class="o">)-&gt;{</span>
            <span class="k">return</span> <span class="n">p1</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">-</span> <span class="n">p2</span><span class="o">.</span><span class="na">getAge</span><span class="o">();</span>
        <span class="o">});</span>
</pre></div>


<h2 id="55">55 二叉树结构简介</h2>
<p>链表的时间复杂度是O(n)<br />
二叉树查找的时间复杂度是O(logn)</p>
<p>数据位置</p>
<div class="codehilite"><pre><span></span>         <span class="err">父节点</span><span class="o">-</span><span class="err">中</span>  

<span class="err">左子树</span><span class="o">-</span><span class="err">小</span>          <span class="err">右子树</span><span class="o">-</span><span class="err">大</span>
</pre></div>


<p>遍历数据<br />
1、前序遍历 根-左-右<br />
2、中序遍历 左-根-右<br />
3、后序遍历 左-右-根</p>
<h2 id="56">56 二叉树基础实现</h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAge</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Person{&quot;</span> <span class="o">+</span>
                <span class="s">&quot;name=&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                <span class="s">&quot;, age=&quot;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span>
                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Person</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">parent</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">right</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">Node</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNode</span><span class="o">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 数据比当前节点小，添加到左子树</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">compareTo</span><span class="o">((</span><span class="n">T</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
                    <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>  <span class="c1">// 保存父节点</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="c1">// 数据比当前节点大，添加到右子树</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
                    <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">toArrayNode</span><span class="o">(){</span>
            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="n">BinaryTree</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">dataList</span><span class="o">[</span><span class="n">BinaryTree</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">foot</span><span class="o">++]</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">;</span>

            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Node</span> <span class="n">root</span><span class="o">;</span> <span class="c1">// 根节点</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">;</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">foot</span> <span class="o">;</span>
    <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">dataList</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * 数据添加</span>
<span class="cm">     *</span>
<span class="cm">     * @param data 要添加的数据</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">data</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&quot;数据不允许为空&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">Node</span> <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">++;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Object</span><span class="o">[]</span> <span class="nf">toArray</span><span class="o">(){</span>
        <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">this</span><span class="o">.</span><span class="na">foot</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dataList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">];</span>

        <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>

        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">dataList</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BinaryTree</span><span class="o">&lt;&gt;();</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小王&quot;</span><span class="o">,</span> <span class="mi">23</span><span class="o">));</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小刘&quot;</span><span class="o">,</span> <span class="mi">27</span><span class="o">));</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;小张&quot;</span><span class="o">,</span> <span class="mi">25</span><span class="o">));</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">tree</span><span class="o">.</span><span class="na">toArray</span><span class="o">()));</span>
        <span class="cm">/**</span>
<span class="cm">         * [</span>
<span class="cm">         * Person{name=&#39;小王&#39;, age=23},</span>
<span class="cm">         * Person{name=&#39;小张&#39;, age=25},</span>
<span class="cm">         * Person{name=&#39;小刘&#39;, age=27}</span>
<span class="cm">         * ]</span>
<span class="cm">         */</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="57">57 二叉树数据删除</h2>
<p>要删除的节点情况：<br />
1、没有子节点，直接删除<br />
2、只有一个子节点（左节点或右节点），删除后用子节点顶替<br />
3、有左右节点，在右子树中找最左边节点顶替<br />
4、需要特殊考虑根节点</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Node</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">parent</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">left</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">Node</span> <span class="n">right</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">Node</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNode</span><span class="o">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 数据比当前节点小，添加到左子树</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">compareTo</span><span class="o">((</span><span class="n">T</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
                    <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>  <span class="c1">// 保存父节点</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="c1">// 数据比当前节点大，添加到右子树</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
                    <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">Node</span> <span class="nf">getMostLeftNode</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">getMostLeftNode</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">Node</span> <span class="nf">getNode</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">compareTo</span><span class="o">((</span><span class="n">T</span><span class="o">)</span> <span class="n">data</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="c1">// 查找子节点</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="c1">// 右边节点</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">compareTo</span><span class="o">((</span><span class="n">T</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">getNode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="c1">// 左边节点</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">getNode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">toArrayNode</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">+</span> <span class="s">&quot; left-&gt; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="n">BinaryTree</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">dataList</span><span class="o">[</span><span class="n">BinaryTree</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">foot</span><span class="o">++]</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">;</span>

            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">+</span> <span class="s">&quot; right-&gt; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Node</span> <span class="n">root</span><span class="o">;</span> <span class="c1">// 根节点</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">count</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">foot</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">dataList</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * 数据添加</span>
<span class="cm">     *</span>
<span class="cm">     * @param data 要添加的数据</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">data</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&quot;数据不允许为空&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">Node</span> <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">=</span> <span class="n">node</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">addNode</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">++;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addMany</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;...</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeRoot</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// 右子树不为空</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">right</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">Node</span> <span class="n">mostLeftNode</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">getMostLeftNode</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">mostLeftNode</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>

            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>

            <span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">=</span> <span class="n">mostLeftNode</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// 右子树为空</span>
        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// 单独根节点</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeChild</span><span class="o">(</span><span class="n">Node</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 1、没有子节点</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// 2、有一个子节点</span>
        <span class="c1">// 2-1 只有右节点</span>
        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// 2-2只有左节点</span>
        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">right</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">==</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// 3、有两个子节点</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="n">Node</span> <span class="n">mostLeftNode</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">getMostLeftNode</span><span class="o">();</span>
            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">;</span>
            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>
            <span class="n">mostLeftNode</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">right</span><span class="o">;</span>

        <span class="o">}</span>

        <span class="n">node</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">(</span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Node</span> <span class="n">node</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">getNode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">node</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// 单独考虑根节点，没有父节点</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">root</span> <span class="o">==</span> <span class="n">node</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">removeRoot</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">removeChild</span><span class="o">(</span><span class="n">node</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">--;</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="n">Object</span><span class="o">[]</span> <span class="nf">toArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">foot</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dataList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">];</span>

        <span class="k">this</span><span class="o">.</span><span class="na">root</span><span class="o">.</span><span class="na">toArrayNode</span><span class="o">();</span>

        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">dataList</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BinaryTree</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BinaryTree</span><span class="o">&lt;&gt;();</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">addMany</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">tree</span><span class="o">.</span><span class="na">toArray</span><span class="o">()));</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="mi">7</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">tree</span><span class="o">.</span><span class="na">toArray</span><span class="o">()));</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="58">58 红黑树原理简介</h2>
<p>二叉树主要特点：<br />
优点：数据查询的时候可以提供更好的查询性能<br />
缺陷：二叉树结构改变的时候（增加或删除）就有可能出现不平衡的问题</p>
<p>平衡二叉树 别称：二叉查找树，平衡二叉B树<br />
插入，删除，查找的最坏时间复杂度为O(logn)<br />
在节点上追加了一个颜色表示<br />
也可以使用boolean true或false</p>
<div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">Color</span><span class="o">{</span>
    <span class="n">RED</span><span class="o">,</span> <span class="n">BLACK</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">BinaryTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="n">Node</span> <span class="n">left</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Node</span> <span class="n">right</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Node</span> <span class="n">parent</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">T</span> <span class="n">data</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Color</span> <span class="n">color</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>红黑树的特点<br />
1、每个节点或者黑色或者红色<br />
2、根节点必须是黑色<br />
3、每个叶子节点是黑色<br />
Java实现的红黑树将使用null代表空节点，因此遍历红黑树将看不到黑色的叶子节点，反而看到每个叶子节点都是红色的<br />
4、如果一个节点是红色的，则它的子节点必须是黑色<br />
从每个根节点的路径上不会有两个连续的红色节点，当黑色节点是可以连续的<br />
若给定黑色节点的个数N，最短路径情况是连续的N个黑色，数的高度为N-1;<br />
最长路径的情况为节点红黑相间，树的高度为2(N-1);<br />
5、从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑色节点数量<br />
6、成为红黑树的主要条件，后序的插入、删除操作都是为了遵守这个规定</p>
<div class="codehilite"><pre><span></span>             <span class="n">黑</span>
       <span class="n">红</span>          <span class="n">红</span>
   <span class="kc">null</span>  <span class="kc">null</span>  <span class="kc">null</span> <span class="kc">null</span> 
</pre></div>


<p>允许黑-黑连接，不允许红-红连接</p>
<p>利用红色节点和黑色节点实现均衡控制</p>
<p>数据插入处理<br />
1、第一次插入，由于原树为空，所以只会违反红-黑树的规则2<br />
要把根节点涂黑<br />
2、如果插入节点的父节点是黑色的，那不会违背红-黑树的原则，什么也不需要做，<br />
但是遇到如下三种情况时，就要开始变色和旋转了<br />
（1）插入节点的父节点和其叔叔节点（祖父节点的另一个子节点）均为红色的<br />
（2）插入节点的父节点是红色，叔叔节点是黑色，且插入节点是其父节点的左子节点<br />
（3）插入节点的父节点是红色，叔叔节点是黑色，且插入节点是其父节点的右子节点</p>
<p>插入节点和父节点，叔叔节点来决定修复处理</p>
<p>数据删除处理</p>
<p>修复的目的是为了保证树结构中黑色节点数量平衡</p>
<h1 id="14">第14 章 ： 类库使用案例分析</h1>
<h2 id="59-stringbuffer">59 StringBuffer使用</h2>
<p>使用StringBuffer追加26个小写字母。逆序输出，并删除前5个字符<br />
StringBuffer允许修改 String不允许修改</p>
<div class="codehilite"><pre><span></span><span class="n">StringBuffer</span> <span class="n">buff</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="sc">&#39;z&#39;</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
    <span class="n">buff</span><span class="o">.</span><span class="na">append</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span><span class="n">i</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">buff</span><span class="o">.</span><span class="na">reverse</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">));</span>
<span class="c1">// utsrqponmlkjihgfedcba</span>
</pre></div>


<h2 id="60">60 随机数组</h2>
<p>Rondom 产生5个[1, 30]之间随机数</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">NumberFactory</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getRandomList</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">){</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">num</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">foot</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">foot</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">31</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span><span class="mi">0</span> <span class="o">){</span>
                <span class="n">list</span><span class="o">[</span><span class="n">foot</span><span class="o">++]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">NumberFactory</span><span class="o">.</span><span class="na">getRandomList</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">list</span><span class="o">));</span>
        <span class="c1">// [27, 3, 9, 4, 12]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="61-email">61 Email验证</h2>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Validator</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isEmail</span><span class="o">(</span><span class="n">String</span> <span class="n">email</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">email</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">email</span><span class="o">)){</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\w+@\\w+\\.\\w+&quot;</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">email</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isEmail</span><span class="o">(</span><span class="s">&quot;ooxx@qq.com&quot;</span><span class="o">));</span>
        <span class="c1">// true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="62">62 扔硬币</h2>
<p>0-1随机数模拟投掷硬币 1000次</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Coin</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">front</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">back</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">throwCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
                <span class="k">this</span><span class="o">.</span><span class="na">front</span> <span class="o">++;</span>
            <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">back</span> <span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getFront</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">front</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getBack</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">back</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Coin</span> <span class="n">coin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Coin</span><span class="o">();</span>
        <span class="n">coin</span><span class="o">.</span><span class="na">throwCoin</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;正面： &quot;</span> <span class="o">+</span> <span class="n">coin</span><span class="o">.</span><span class="na">getFront</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;背面： &quot;</span> <span class="o">+</span> <span class="n">coin</span><span class="o">.</span><span class="na">getBack</span><span class="o">());</span>
        <span class="c1">// 正面： 495</span>
        <span class="c1">// 背面： 505</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="63-ip">63 IP验证</h2>
<p>eg: 127.0.0.1<br />
第一位 [12]?<br />
第二位 [0-9]{0, 2}</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Validator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isIp</span><span class="o">(</span><span class="n">String</span> <span class="n">ip</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;(\\d{1,3}\\.){3}\\d{1,3}&quot;</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">ip</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\.&quot;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">str</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="o">||</span> <span class="o">!</span><span class="n">str</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">num</span><span class="o">)))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isIp</span><span class="o">(</span><span class="s">&quot;127.0.0&quot;</span><span class="o">));</span>          <span class="c1">// false</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isIp</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">));</span>        <span class="c1">// true</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isIp</span><span class="o">(</span><span class="s">&quot;255.255.255.255&quot;</span><span class="o">));</span>  <span class="c1">// true</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isIp</span><span class="o">(</span><span class="s">&quot;255.255.255.666&quot;</span><span class="o">));</span>  <span class="c1">// false</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Validator</span><span class="o">.</span><span class="na">isIp</span><span class="o">(</span><span class="s">&quot;255.255.001.1&quot;</span><span class="o">));</span>    <span class="c1">// false</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="64-html">64 HTML拆分</h2>
<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">font</span> <span class="na">face</span><span class="o">=</span><span class="s">&quot;Arial,Serif&quot;</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;+2&quot;</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">font</span><span class="p">&gt;</span>    
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">html</span>  <span class="o">=</span> <span class="s">&quot;&lt;font face=\&quot;Arial,Serif\&quot; size=\&quot;+2\&quot; color=\&quot;red\&quot;&gt;&lt;/font&gt;&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\w+=\&quot;[a-zA-Z0-9,\\+]+\&quot;&quot;</span><span class="o">;</span>
        <span class="n">Matcher</span> <span class="n">matcher</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">regex</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="n">html</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">matcher</span><span class="o">.</span><span class="na">find</span><span class="o">()){</span>
            <span class="n">String</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="n">String</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;=&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">result</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
            <span class="cm">/**</span>
<span class="cm">             * face   Arial,Serif</span>
<span class="cm">             * size   +2</span>
<span class="cm">             * color  red</span>
<span class="cm">             */</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="65">65 国家代码</h2>
<p>实现国际化应用<br />
输入国家代号，调用资源文件<br />
3个资源文件</p>
<div class="codehilite"><pre><span></span><span class="o">#</span> <span class="n">message</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">默认资源</span>

<span class="o">#</span> <span class="n">message_en_US</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">英文资源</span>

<span class="o">#</span> <span class="n">message_zh_CN</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">中文资源</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Locale</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ResourceBundle</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">MessageUtil</span> <span class="o">{</span>
    <span class="c1">// 将固定的内容定义为常量</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CHINA</span> <span class="o">=</span> <span class="s">&quot;cn&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ENGLISH</span> <span class="o">=</span> <span class="s">&quot;en&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">BASENAME</span> <span class="o">=</span> <span class="s">&quot;message&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">KEY</span> <span class="o">=</span> <span class="s">&quot;info&quot;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">country</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>
        <span class="n">Locale</span> <span class="n">locale</span> <span class="o">=</span> <span class="n">getLocale</span><span class="o">(</span><span class="n">country</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">locale</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">ResourceBundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="n">BASENAME</span><span class="o">,</span> <span class="n">locale</span><span class="o">);</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">KEY</span><span class="o">).</span><span class="na">getBytes</span><span class="o">(</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="o">),</span> <span class="s">&quot;utf-8&quot;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Locale</span> <span class="nf">getLocale</span><span class="o">(</span><span class="n">String</span> <span class="n">country</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">country</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">CHINA</span><span class="o">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&quot;zh&quot;</span><span class="o">,</span> <span class="s">&quot;CN&quot;</span><span class="o">);</span>
            <span class="k">case</span> <span class="n">ENGLISH</span><span class="o">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&quot;en&quot;</span><span class="o">,</span> <span class="s">&quot;US&quot;</span><span class="o">);</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>

    <span class="o">}</span>


<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入：cn 或者 en&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MessageUtil</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]));</span>
        <span class="c1">// 中文资源</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="66">66 学生信息比较</h2>
<p>先用成绩比较，如果相同按年龄比较<br />
数据结构</p>
<div class="codehilite"><pre><span></span><span class="err">姓名：年龄：成绩</span><span class="o">|</span><span class="err">姓名：年龄：成绩</span>
<span class="n">eg</span><span class="p">:</span>
<span class="err">张三</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">98</span><span class="o">|</span><span class="err">李四</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">96</span><span class="o">|</span><span class="err">王五</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">94</span>
</pre></div>


<p>结构化的字符串处理</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">Student</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">score</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="kt">double</span> <span class="n">score</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Student</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 先用成绩比较，再用年龄比较</span>
        <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">score</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="na">score</span><span class="o">){</span>
            <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">score</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="na">score</span><span class="o">){</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Student{&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;,&#39;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">score</span> <span class="o">+</span> <span class="s">&quot;}&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="s">&quot;张三:21:98|李四:23:96|王五:24:94&quot;</span><span class="o">;</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\|&quot;</span><span class="o">);</span>
        <span class="n">Student</span><span class="o">[]</span> <span class="n">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">[</span><span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">String</span><span class="o">[]</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">);</span>
            <span class="n">students</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="mi">1</span><span class="o">]),</span> <span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">temp</span><span class="o">[</span><span class="mi">2</span><span class="o">]));</span>
        <span class="o">}</span>

        <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">students</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">students</span><span class="o">));</span>
        <span class="c1">// [Student{王五,24, 94.0}, Student{李四,23, 96.0}, Student{张三,21, 98.0}]</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2019-2020
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/mouday" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>