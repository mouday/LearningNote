



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>第7 章 ： Java基础类库 - 学习笔记</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#7-java" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="学习笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              学习笔记
            </span>
            <span class="md-header-nav__topic">
              
                第7 章 ： Java基础类库
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="学习笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    学习笔记
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="主页" class="md-nav__link">
      主页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../ElasticSearch/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../JavaScript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../MySQL/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../人工智能/" title="人工智能" class="md-nav__link">
      人工智能
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../LEK/" title="LEK" class="md-nav__link">
      LEK
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../设计模式/" title="设计模式" class="md-nav__link">
      设计模式
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../前端/" title="前端" class="md-nav__link">
      前端
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#26-stringbuffer" class="md-nav__link">
    26 StringBuffer类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-charsequence" class="md-nav__link">
    27 CharSequence接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-autocloseable" class="md-nav__link">
    28 AutoCloseable接口
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#29-runtime" class="md-nav__link">
    29 Runtime类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#30-system" class="md-nav__link">
    30 System类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#31-cleaner" class="md-nav__link">
    31 Cleaner类
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    32 对象克隆
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="7-java">第7 章 ： Java基础类库</h1>
<h2 id="26-stringbuffer">26 StringBuffer类</h2>
<p>String有两个常量池:<br />
静态常量池，运行时常量池</p>
<p>String对象实例化直接赋值形式，可以保存到常量池中以便重用</p>
<div class="codehilite"><pre><span></span><span class="c1">// 构造方法</span>
<span class="kd">public</span> <span class="nf">StringBuffer</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span>

<span class="c1">// 追加</span>
<span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span>

<span class="c1">// 插入</span>
<span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">insert</span><span class="o">(</span><span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="n">String</span> <span class="n">str</span><span class="o">)</span>

<span class="c1">// 删除指定范围数据</span>
<span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span>

<span class="c1">// 字符串内容反转</span>
<span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">StringBuffer</span> <span class="nf">reverse</span><span class="o">()</span>
</pre></div>


<p>代码示例</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="s">&quot;hello&quot;</span><span class="o">);</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; world&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="c1">// hello world</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>String 转换为 StringBuffer 使用构造方法<br />
StringBuffer 转换为 String 使用toString</p>
<p>操作示例</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="s">&quot;hello&quot;</span><span class="o">);</span>

        <span class="c1">// 可以连续操作</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;world&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="c1">// hello world</span>

        <span class="c1">// 插入</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="s">&quot; Java&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">);</span>
        <span class="c1">// hello Java world</span>

        <span class="c1">// 删除</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">);</span>
        <span class="c1">// hello world</span>

        <span class="c1">// 反转</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">reverse</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">);</span>
        <span class="c1">// dlrow olleh</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>类似功能类 StringBuilder<br />
JDK &gt;= 1.5</p>
<p>区别<br />
String 字符串，内容不可修改<br />
StringBuffer JDK&gt;=1.0 线程安全, 使用了synchronized<br />
StringBuilder JDK&gt;=1.5 非线程安全</p>
<h2 id="27-charsequence">27 CharSequence接口</h2>
<p>CharSequence描述字符串结构的接口</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">String</span>
    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;,</span> <span class="n">CharSequence</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">StringBuffer</span>
    <span class="kd">extends</span> <span class="n">AbstractStringBuilder</span>
    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="n">CharSequence</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">StringBuilder</span>
    <span class="kd">extends</span> <span class="n">AbstractStringBuilder</span>
    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="n">CharSequence</span>
</pre></div>


<p>CharSequence接口方法</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CharSequence</span><span class="o">{</span>
    <span class="kt">int</span> <span class="nf">length</span><span class="o">();</span>
    <span class="kt">char</span> <span class="nf">charAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">);</span>
    <span class="n">CharSequence</span> <span class="nf">subSequence</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">);</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<h2 id="28-autocloseable">28 AutoCloseable接口</h2>
<p>AutoCloseable接口 用于资源的自动关闭<br />
JDK &gt;= 1.7</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AutoCloseable</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>不使用自动关闭代码示例</p>
<div class="codehilite"><pre><span></span><span class="kd">interface</span> <span class="nc">IMessage</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MessageImpl</span> <span class="kd">implements</span> <span class="n">IMessage</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MessageImpl</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;发送消息： &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">open</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;打开资源&quot;</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;关闭资源&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">MessageImpl</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageImpl</span><span class="o">(</span><span class="s">&quot;消息内容&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">open</span><span class="o">()){</span>
            <span class="n">message</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
            <span class="n">message</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="cm">/**</span>
<span class="cm">         * 打开资源</span>
<span class="cm">         * 发送消息： 消息内容</span>
<span class="cm">         * 关闭资源</span>
<span class="cm">         */</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>结合异常处理语句实现资源自动关闭</p>
<div class="codehilite"><pre><span></span><span class="kd">interface</span> <span class="nc">IMessage</span> <span class="kd">extends</span> <span class="n">AutoCloseable</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MessageImpl</span> <span class="kd">implements</span> <span class="n">IMessage</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MessageImpl</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">send</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;发送消息： &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">open</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;打开资源&quot;</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;关闭资源&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span><span class="o">(</span><span class="n">MessageImpl</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageImpl</span><span class="o">(</span><span class="s">&quot;消息内容&quot;</span><span class="o">)){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">open</span><span class="o">()){</span>
                <span class="n">message</span><span class="o">.</span><span class="na">send</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>

        <span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * 打开资源</span>
<span class="cm">         * 发送消息： 消息内容</span>
<span class="cm">         * 关闭资源</span>
<span class="cm">         */</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="29-runtime">29 Runtime类</h2>
<p>Runtime描述运行时状态<br />
一个JVM进程只允许提供一个Runtime，使用了单例设计模式<br />
可以使用静态方法获取实例化对象</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="n">Runtime</span> <span class="nf">getRuntime</span><span class="o">()</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Runtime</span> <span class="n">run</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">();</span>

        <span class="c1">// 读取CPU内核数量</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">run</span><span class="o">.</span><span class="na">availableProcessors</span><span class="o">());</span>
        <span class="c1">//  8</span>

        <span class="c1">// 获取最大可用内存空间 1/4</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">run</span><span class="o">.</span><span class="na">maxMemory</span><span class="o">());</span>

        <span class="c1">// 获取可用内存空间 1/64</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">run</span><span class="o">.</span><span class="na">totalMemory</span><span class="o">());</span>

        <span class="c1">// 获取空闲内存空间</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">run</span><span class="o">.</span><span class="na">freeMemory</span><span class="o">());</span>

        <span class="c1">// 手工进行GC处理</span>
        <span class="n">run</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>GC (Garbage Collector) 垃圾收集器<br />
由系统自动调用<br />
或者使用Runtime类中的gc()方法，手工清除</p>
<h2 id="30-system">30 System类</h2>
<p>常用方法</p>
<div class="codehilite"><pre><span></span><span class="c1">// 数组拷贝</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">arraycopy</span><span class="o">(</span><span class="n">Object</span> <span class="n">src</span><span class="o">,</span>  <span class="kt">int</span>  <span class="n">srcPos</span><span class="o">,</span>
                                    <span class="n">Object</span> <span class="n">dest</span><span class="o">,</span> <span class="kt">int</span> <span class="n">destPos</span><span class="o">,</span>
                                    <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>

<span class="c1">// 获取时间数值</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
<span class="c1">// 1573918888172</span>

<span class="c1">// 垃圾回收</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">gc</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">gc</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<h2 id="31-cleaner">31 Cleaner类</h2>
<p>JDK&gt;=1.9<br />
Cleaner类提供对象清理操作<br />
替代finialize()方法<br />
C++提供了构造函数，析构函数<br />
Java垃圾使用GC回收</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">Demo</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;构造函数&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">finalize</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;垃圾回收&quot;</span><span class="o">);</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">finalize</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Demo</span> <span class="n">demo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Demo</span><span class="o">();</span>
        <span class="n">demo</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>
        <span class="cm">/**</span>
<span class="cm">         * 构造函数</span>
<span class="cm">         * 垃圾回收</span>
<span class="cm">         */</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>不建议使用 finalize()方法, 使用AutoCloseable接口<br />
使用Cleaner类，使用单独的线程去回收资源，能提高整体性能</p>
<h2 id="32">32 对象克隆</h2>
<div class="codehilite"><pre><span></span><span class="kd">protected</span> <span class="kd">native</span> <span class="n">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">CloneNotSupportedException</span><span class="o">;</span>

<span class="c1">// 只有接口名，没有任何方法，只是能力标识接口</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Cloneable</span> <span class="o">{</span>
<span class="o">}</span>
</pre></div>


<p>接口作用：<br />
标准<br />
能力</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="kd">implements</span> <span class="n">Cloneable</span><span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">CloneNotSupportedException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Demo</span> <span class="n">demo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Demo</span><span class="o">();</span>
        <span class="n">Demo</span> <span class="n">demo2</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">demo2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Demo</span><span class="o">)</span><span class="n">demo</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">CloneNotSupportedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">demo</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">demo2</span><span class="o">);</span>
        <span class="cm">/**</span>
<span class="cm">         * Demo@2503dbd3</span>
<span class="cm">         * Demo@4b67cf4d</span>
<span class="cm">         */</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h1 id="8">第8 章 ： 数字操作类</h1>
<h2 id="33-math">33 Math数学计算类</h2>
<p>Math提供的方法都是static方法,都是基本数学公式</p>
<div class="codehilite"><pre><span></span><span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(-</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// 10</span>
<span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="c1">// 10</span>
<span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">//100.0</span>
<span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="mi">9</span><span class="o">)</span> <span class="c1">//3.0</span>
<span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="mf">10.4</span><span class="o">)</span> <span class="c1">// 10</span>
<span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="mf">10.5</span><span class="o">)</span> <span class="c1">// 11</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">MathUtil</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">MathUtil</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="c1">// 自定义保留位数</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">round</span><span class="o">(</span><span class="kt">double</span> <span class="n">num</span><span class="o">,</span> <span class="kt">int</span> <span class="n">scale</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">num</span> <span class="o">*</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">scale</span><span class="o">))</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">scale</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MathUtil</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="mf">10.98766</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span> <span class="c1">// 10.99</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="34-random">34 Random随机数生成类</h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
        <span class="c1">// 产生随机数范围[0, 10)</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>彩票号码生成示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * 随机示例</span>
<span class="cm"> * 36 选 7</span>
<span class="cm"> */</span>
<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getCodeList</span><span class="o">(){</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">7</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">foot</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">Random</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">foot</span><span class="o">&lt;</span><span class="mi">7</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">code</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">37</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">isUse</span><span class="o">(</span><span class="n">code</span><span class="o">,</span> <span class="n">data</span><span class="o">)){</span>
                <span class="n">data</span><span class="o">[</span><span class="n">foot</span><span class="o">++]</span> <span class="o">=</span> <span class="n">code</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// 检查号码是否可以使用，不能为0，不能重复</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isUse</span><span class="o">(</span><span class="kt">int</span> <span class="n">code</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">temp</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">code</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">temp</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">code</span> <span class="o">==</span> <span class="n">x</span><span class="o">){</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">getCodeList</span><span class="o">();</span>

        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">data</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">// 15, 19, 9, 11, 33, 2, 21, </span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="35">35 大数字处理类</h2>
<p>可以使用String保存,不过操作麻烦</p>
<p>继承体系</p>
<div class="codehilite"><pre><span></span><span class="k">Object</span>
    <span class="o">-</span><span class="nb">Number</span>
        <span class="o">-</span><span class="nb">Integer</span>
        <span class="o">-</span><span class="n">Byte</span>
        <span class="o">-</span><span class="n">Long</span>
        <span class="o">-</span><span class="n">Short</span>
        <span class="o">-</span><span class="nb">Float</span>
        <span class="o">-</span><span class="n">Double</span>
        <span class="o">-</span><span class="n">BigInteger</span>
        <span class="o">-</span><span class="n">BigDecimal</span>
    <span class="o">-</span><span class="nb">Boolean</span>
    <span class="o">-</span><span class="nb">Character</span>
</pre></div>


<p>BigInteger 和 BigDecimal使用方法基本相似</p>
<p>过大的数据也会影响程序性能，优先使用基础数据类型</p>
<p>减法运算</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BigInteger</span> <span class="n">big1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;98960973126687599871&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">big2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;98960973126687599872&quot;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">big2</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">big1</span><span class="o">));</span>
        <span class="c1">// 1</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>求余运算</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">BigInteger</span> <span class="n">big1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;1001&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">big2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&quot;10&quot;</span><span class="o">);</span>
        <span class="n">BigInteger</span><span class="o">[]</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">big1</span><span class="o">.</span><span class="na">divideAndRemainder</span><span class="o">(</span><span class="n">big2</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ret</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span>  <span class="n">ret</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
        <span class="c1">// 100, 1</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>使用BigDecimal实现四舍五入进位</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.RoundingMode</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">MathUtil</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">MathUtil</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="c1">// 自定义保留位数</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">round</span><span class="o">(</span><span class="kt">double</span> <span class="n">num</span><span class="o">,</span> <span class="kt">int</span> <span class="n">scale</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="n">num</span><span class="o">).</span><span class="na">divide</span><span class="o">(</span>
            <span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mf">1.0</span><span class="o">),</span> <span class="n">scale</span><span class="o">,</span> <span class="n">RoundingMode</span><span class="o">.</span><span class="na">HALF_UP</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MathUtil</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="mf">10.98766</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span> <span class="c1">// 10.99</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Math使用的是基本数据类型，性能高于大数据处理类</p>
<h1 id="9">第9 章 ： 日期操作类</h1>
<h2 id="36-date">36 Date日期处理类</h2>
<p>Date类只是对long数据的一种包装</p>
<p>Date无参构造函数</p>
<div class="codehilite"><pre><span></span> <span class="kd">public</span> <span class="nf">Date</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
    <span class="o">}</span>
 <span class="err">```</span> 

<span class="n">示例</span>
<span class="err">```</span><span class="n">java</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
        <span class="c1">// Sun Nov 17 20:39:41 CST 2019</span>

        <span class="c1">// 日期转long</span>
        <span class="kt">long</span> <span class="n">time</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">time</span><span class="o">);</span>
        <span class="c1">// 1573994381189</span>

        <span class="c1">// long转日期 增加1分钟</span>
        <span class="n">Date</span> <span class="n">date1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">time</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">date1</span><span class="o">);</span>
        <span class="c1">// Sun Nov 17 20:40:41 CST 2019</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="37-simpledateformat">37 SimpleDateFormat日期处理类</h2>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">abstract</span> <span class="n">Format</span>
    <span class="o">-</span><span class="n">abstract</span> <span class="n">DataFormat</span>
        <span class="o">-</span><span class="n">SimpleDateFormat</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">// 日期格式化</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="nf">format</span> <span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span>

<span class="c1">// 字符串转日期</span>
<span class="kd">public</span> <span class="n">Date</span> <span class="nf">parse</span><span class="o">(</span><span class="n">String</span> <span class="n">source</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span>
</pre></div>


<p>日期格式化</p>
<div class="codehilite"><pre><span></span><span class="err">年</span> <span class="n">yyyy</span>
<span class="err">月</span> <span class="n">MM</span>
<span class="err">日</span> <span class="n">dd</span>
<span class="err">时</span> <span class="n">HH</span>
<span class="err">分</span> <span class="n">mm</span>
<span class="err">秒</span> <span class="n">ss</span>
<span class="err">毫秒</span> <span class="n">SSS</span>
</pre></div>


<p>指定字符串定义的时候，日期数字超过指定的范围会自动进位</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>

        <span class="n">SimpleDateFormat</span> <span class="n">sdf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd HH:MM:ss&quot;</span><span class="o">);</span>

        <span class="c1">// 日期转字符串</span>
        <span class="n">String</span> <span class="n">dateStr</span> <span class="o">=</span> <span class="n">sdf</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateStr</span><span class="o">);</span>
        <span class="c1">// 2019-11-17 20:11:35</span>

        <span class="c1">// 字符串转日期</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sdf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">dateStr</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="c1">// Sun Nov 17 20:00:35 CST 2019</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>数字格式化</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.NumberFormat</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">money</span> <span class="o">=</span> <span class="mf">323223210.09</span><span class="o">;</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">format</span><span class="o">(</span><span class="n">money</span><span class="o">));</span>
        <span class="c1">// 323,223,210.09</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>String 字符串可以向任何类型转换</p>
<h1 id="10">第10 章 ： 正则表达式</h1>
<h2 id="38">38 认识正则表达式</h2>
<p>JDK &gt;= 1.4<br />
使用正则方便进行数据验证处理，复杂字符串修改</p>
<p>实现字符串转数字</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isNumber</span><span class="o">(</span><span class="n">String</span> <span class="n">temp</span><span class="o">){</span>
        <span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">chars</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">c</span> <span class="o">&gt;</span> <span class="sc">&#39;9&#39;</span> <span class="o">||</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="sc">&#39;0&#39;</span><span class="o">){</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">number</span> <span class="o">=</span> <span class="s">&quot;123&quot;</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">isNumber</span><span class="o">(</span><span class="n">number</span><span class="o">)){</span>
            <span class="kt">int</span> <span class="n">i</span>  <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="c1">// 123</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>使用正则表达式</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">number</span> <span class="o">=</span> <span class="s">&quot;123&quot;</span><span class="o">;</span>
<span class="k">if</span><span class="o">(</span><span class="n">number</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="s">&quot;\\d+&quot;</span><span class="o">)){</span>
    <span class="kt">int</span> <span class="n">i</span>  <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="c1">// 123</span>
<span class="o">}</span>
</pre></div>


<h2 id="39">39 常用正则标记</h2>
<p>1、字符匹配</p>
<div class="codehilite"><pre><span></span><span class="n">x</span>   <span class="err">任意字符</span>
<span class="err">\\</span>  <span class="err">\</span>
<span class="err">\</span><span class="n">n</span>  <span class="err">换行</span>
<span class="err">\</span><span class="n">t</span>  <span class="err">制表符</span>
</pre></div>


<p>2、字符集</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="n">abc</span><span class="o">]</span><span class="w"> </span><span class="n">任意一个</span><span class="w"></span>
<span class="o">[</span><span class="n">^abc</span><span class="o">]</span><span class="w">  </span><span class="n">不在其中任意一个</span><span class="w"></span>
<span class="o">[</span><span class="n">a-zA-Z</span><span class="o">]</span><span class="w"> </span><span class="n">任意字母</span><span class="w"></span>
<span class="o">[</span><span class="n">0-9</span><span class="o">]</span><span class="w"> </span><span class="n">一个数字</span><span class="w"></span>
</pre></div>


<p>3、简化字符集</p>
<div class="codehilite"><pre><span></span><span class="p">.</span> <span class="err">任意一个字符</span>
<span class="err">\</span><span class="n">d</span> <span class="err">数字</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="err">\</span><span class="n">D</span> <span class="err">等价于</span><span class="p">[</span><span class="o">^</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="err">\</span><span class="n">s</span> <span class="err">匹配任意空格，换行，制表符</span>
<span class="err">\</span><span class="n">S</span> <span class="err">匹配非空格数据</span>
<span class="err">\</span><span class="n">w</span> <span class="err">字母、数字、下划线等价于</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z_0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
<span class="err">\</span><span class="n">W</span> <span class="err">非字母、数字、下划线等价于</span><span class="p">[</span><span class="o">^</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z_0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
</pre></div>


<p>4、边界匹配</p>
<div class="codehilite"><pre><span></span><span class="o">^</span> <span class="err">匹配开始</span>
<span class="err">$</span> <span class="err">匹配结束</span>
</pre></div>


<p>5、数量</p>
<div class="codehilite"><pre><span></span><span class="o">?</span> <span class="mi">0</span><span class="err">次或</span><span class="mi">1</span><span class="err">次</span>
<span class="o">*</span> <span class="mi">0</span><span class="err">次、</span><span class="mi">1</span><span class="err">次或多次</span>
<span class="o">+</span> <span class="mi">1</span><span class="err">次或多次</span>
<span class="err">{</span><span class="n">n</span><span class="err">}</span> <span class="err">长度</span><span class="o">=</span><span class="n">n次</span>
<span class="err">{</span><span class="n">n</span><span class="p">,</span><span class="err">}</span> <span class="err">长度</span><span class="o">&gt;=</span><span class="n">n次</span>
<span class="err">{</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="err">}</span> <span class="err">长度</span><span class="o">&gt;=</span><span class="n">n</span> <span class="k">and</span> <span class="err">长度</span><span class="o">&lt;=</span><span class="n">m次</span>
</pre></div>


<p>6、逻辑表达式,多个正则</p>
<div class="codehilite"><pre><span></span><span class="n">XY</span> <span class="n">X之后是Y</span>
<span class="n">X</span><span class="o">|</span><span class="n">Y</span> <span class="err">或</span>
<span class="p">()</span> <span class="err">整体描述</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;123&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\d+&quot;</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">));</span>
<span class="c1">// true</span>
</pre></div>


<h2 id="40-string">40 String类对正则的支持</h2>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">replaceFirst</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">,</span> <span class="n">String</span> <span class="n">replacement</span><span class="o">)</span> 
<span class="kd">public</span> <span class="n">String</span> <span class="nf">replaceAll</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">,</span> <span class="n">String</span> <span class="n">replacement</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">split</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">split</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">limit</span><span class="o">)</span> 
</pre></div>


<p>示例1：删除非字母和非数字</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;asfasdfw3414^&amp;*^&amp;%^&amp;wefwerfdc^&amp;*&amp;*fafdasd&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;[^a-zA-Z0-9]+&quot;</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="n">regex</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
<span class="c1">// asfasdfw3414wefwerfdcfafdasd</span>
</pre></div>


<p>示例2：数字分隔拆分字符串</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;sdasdf123123ffsadfsda232edasf&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\d+&quot;</span><span class="o">;</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">regex</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">list</span><span class="o">){</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm"> * sdasdf</span>
<span class="cm"> * ffsadfsda</span>
<span class="cm"> * edasf</span>
<span class="cm"> */</span>
</pre></div>


<p>示例3：判断字符串是否为数字</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;10.1&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\d+(\\.\\d+)?&quot;</span><span class="o">;</span>

<span class="k">if</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">)){</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">str</span><span class="o">));</span>
    <span class="c1">// 10.1</span>
<span class="o">}</span>
</pre></div>


<p>示例4：判断字符串是否为日期</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;2019-11-17&quot;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;\\d{4}-\\d{2}-\\d{2}&quot;</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="n">str</span><span class="o">));</span>
            <span class="c1">// Sun Nov 17 00:00:00 CST 2019</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>示例5：判断电话号码<br />
电话号码</p>
<div class="codehilite"><pre><span></span><span class="mi">51283346</span>      <span class="err">\\</span><span class="n">d</span><span class="err">{</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="err">}</span>
<span class="mi">010</span><span class="o">-</span><span class="mi">51283346</span>  <span class="p">(</span><span class="err">\\</span><span class="n">d</span><span class="err">{</span><span class="mi">3</span><span class="err">}</span><span class="o">-</span><span class="p">)</span><span class="o">?</span>
<span class="p">(</span><span class="mi">010</span><span class="p">)</span><span class="mi">51283346</span> <span class="p">(</span><span class="err">\</span><span class="p">(</span><span class="err">\\</span><span class="n">d</span><span class="err">{</span><span class="mi">3</span><span class="err">}\</span><span class="p">))</span><span class="o">?</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span>
                <span class="s">&quot;51283346&quot;</span><span class="o">,</span>
                <span class="s">&quot;010-51283346&quot;</span><span class="o">,</span>
                <span class="s">&quot;(010)51283346&quot;</span>
        <span class="o">};</span>

        <span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;((\\d{3}-)|(\\(\\d{3}\\)))?\\d{7,8}&quot;</span><span class="o">;</span>

        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">number</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">number</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="cm">/**</span>
<span class="cm">         * true</span>
<span class="cm">         * true</span>
<span class="cm">         * true</span>
<span class="cm">         */</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>示例6：邮箱验证<br />
用户名：数字、字母、下划线(不能开头)<br />
域名：数字、字母、下划线<br />
域名后缀：com、cn、net、com.cn、org</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">&quot;google@qq.com&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">regex</span> <span class="o">=</span> <span class="s">&quot;[0-9a-zA-Z]\\w+@\\w+\\.(com|cn|net|com.cn|org)&quot;</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">email</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">regex</span><span class="o">));</span>
<span class="c1">// true</span>
</pre></div>


<h2 id="41-javautilregex">41 java.util.regex包支持</h2>
<p>Pattern 正则表达式编译</p>
<div class="codehilite"><pre><span></span><span class="kd">private</span> <span class="nf">Pattern</span><span class="o">(</span><span class="n">String</span> <span class="n">p</span><span class="o">,</span> <span class="kt">int</span> <span class="n">f</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">Pattern</span> <span class="nf">compile</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">)</span>
</pre></div>


<p>Mather 正则匹配</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="n">Matcher</span> <span class="nf">matcher</span><span class="o">(</span><span class="n">CharSequence</span> <span class="n">input</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">()</span>
</pre></div>


<p>Pattern示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">&quot;ooxx12ooxx000ooxx&quot;</span><span class="o">;</span>
        <span class="n">Pattern</span> <span class="n">pattern</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;\\d+&quot;</span><span class="o">);</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="cm">/**</span>
<span class="cm">         * ooxx</span>
<span class="cm">         * ooxx</span>
<span class="cm">         * ooxx</span>
<span class="cm">         */</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Matcher示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">number</span> <span class="o">=</span> <span class="s">&quot;6687&quot;</span><span class="o">;</span>
        <span class="n">Pattern</span> <span class="n">pattern</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;\\d+&quot;</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">matcher</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">matcher</span><span class="o">.</span><span class="na">matches</span><span class="o">());</span>
        <span class="c1">// true</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>拆分，替换，匹配使用String类就可以实现</p>
<p>String不具备的功能：</p>
<p>示例：提取sql中的变量名</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;insert into student(name, age) values(#{name}, #{value})&quot;</span><span class="o">;</span>

        <span class="n">Pattern</span> <span class="n">pattern</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;#\\{\\w+\\}&quot;</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">matcher</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">matcher</span><span class="o">.</span><span class="na">find</span><span class="o">()){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">matcher</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;#|\\{|\\}&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="cm">/**</span>
<span class="cm">         * name</span>
<span class="cm">         * value</span>
<span class="cm">         */</span>


    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="11">第11 章 ： 国际化程序实现</h2>
<h2 id="42">42 国际化程序实现原理</h2>
<p>统一程序代码，根据不同国家实现不同语言描述<br />
需要解决问题：<br />
1、定义保存文字信息<br />
2、根据不同区域语言编码读取文件信息</p>
<h2 id="43-locale">43 Locale类</h2>
<p>Locale类：专门描述区域和语言编码的类</p>
<p>构造方法</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="nf">Locale</span><span class="o">(</span><span class="n">String</span> <span class="n">language</span><span class="o">)</span>
<span class="kd">public</span> <span class="nf">Locale</span><span class="o">(</span><span class="n">String</span> <span class="n">language</span><span class="o">,</span> <span class="n">String</span> <span class="n">country</span><span class="o">)</span>
</pre></div>


<p>国家语言代码<br />
中文：zh_CN<br />
美国：en_US</p>
<p>使用示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Locale</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>

        <span class="n">Locale</span> <span class="n">loc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&quot;zh&quot;</span><span class="o">,</span> <span class="s">&quot;CN&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">loc</span><span class="o">);</span>
        <span class="c1">// zh_CN</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>读取本地默认环境</p>
<div class="codehilite"><pre><span></span><span class="n">Locale</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">loc</span><span class="o">);</span>
<span class="c1">// zh_CN</span>
</pre></div>


<p>使用常量</p>
<div class="codehilite"><pre><span></span><span class="n">Locale</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">Locale</span><span class="o">.</span><span class="na">CHINA</span><span class="o">;</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">loc</span><span class="o">);</span>
<span class="c1">// zh_CN</span>
</pre></div>


<h2 id="44-resourcebundle">44 ResourceBundle读取资源文件</h2>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ResourceBundle</span> <span class="nf">getBundle</span><span class="o">(</span><span class="n">String</span> <span class="n">baseName</span><span class="o">)</span>
<span class="c1">// baseName 没有后缀的文件名</span>
</pre></div>


<p>资源文件 message.properties</p>
<div class="codehilite"><pre><span></span><span class="n">info</span><span class="o">=</span><span class="s">&quot;这是消息&quot;</span>
</pre></div>


<p>读取实例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ResourceBundle</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>

        <span class="n">ResourceBundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">);</span>

        <span class="c1">// 解决中文乱码问题</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;info&quot;</span><span class="o">).</span><span class="na">getBytes</span><span class="o">(</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="o">),</span> <span class="s">&quot;utf-8&quot;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="c1">// &quot;这是消息&quot;</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="45">45 实现国际化程序开发</h2>
<p>CLASSPATH 下建立文件 </p>
<div class="codehilite"><pre><span></span><span class="n">cat</span> <span class="n">Message</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">默认资源</span> 

<span class="n">cat</span> <span class="n">Message_zh_CN</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">中文资源</span> 

<span class="n">cat</span> <span class="n">Message_en_US</span><span class="p">.</span><span class="n">properties</span>
<span class="n">info</span><span class="o">=</span><span class="err">英文资源</span>
</pre></div>


<p>执行程序会读取中文资源</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ResourceBundle</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>

        <span class="n">ResourceBundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">);</span>

        <span class="c1">// 解决中文乱码问题</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;info&quot;</span><span class="o">).</span><span class="na">getBytes</span><span class="o">(</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="o">),</span> <span class="s">&quot;utf-8&quot;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="c1">// 中文资源</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>getBundle方法默认加载<code>Locale.getDefault()</code></p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ResourceBundle</span> <span class="nf">getBundle</span><span class="o">(</span><span class="n">String</span> <span class="n">baseName</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="n">getBundleImpl</span><span class="o">(</span><span class="n">baseName</span><span class="o">,</span> <span class="n">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">(),</span>
                             <span class="n">getLoader</span><span class="o">(</span><span class="n">Reflection</span><span class="o">.</span><span class="na">getCallerClass</span><span class="o">()),</span>
                             <span class="n">getDefaultControl</span><span class="o">(</span><span class="n">baseName</span><span class="o">));</span>
    <span class="o">}</span>
</pre></div>


<p>使用重载函数，读取英文资源</p>
<div class="codehilite"><pre><span></span><span class="n">Locale</span> <span class="n">locale</span> <span class="o">=</span> <span class="n">Locale</span><span class="o">.</span><span class="na">US</span><span class="o">;</span>
<span class="n">ResourceBundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">,</span> <span class="n">locale</span><span class="o">);</span>

<span class="c1">// 解决中文乱码问题</span>
<span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;info&quot;</span><span class="o">).</span><span class="na">getBytes</span><span class="o">(</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="o">),</span> <span class="s">&quot;utf-8&quot;</span><span class="o">);</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="c1">// 英文资源</span>
</pre></div>


<p>如果没有对应区域编码的资源文件，读取默认资源<br />
读取流程：</p>
<div class="codehilite"><pre><span></span><span class="err">指定区域的资源文件</span> <span class="o">&gt;</span> <span class="err">默认的本地资源文件</span> <span class="o">&gt;</span> <span class="err">公共的资源文件</span>
</pre></div>


<h2 id="46">46 格式化文本显示</h2>
<p>格式化方法</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageFormat</span> <span class="kd">extends</span> <span class="n">Format</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">format</span><span class="o">(</span><span class="n">String</span> <span class="n">pattern</span><span class="o">,</span> <span class="n">Object</span> <span class="o">...</span> <span class="n">arguments</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>代码示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.MessageFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 占位符{}</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;hello {0} date: {1}&quot;</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="s">&quot;admin&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">())));</span>
        <span class="c1">// hello admin date: 2019-11-18</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2019-2021
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/mouday" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>