



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>第15 章 ： 文件操作 - 学习笔记</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#15" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="学习笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              学习笔记
            </span>
            <span class="md-header-nav__topic">
              
                第15 章 ： 文件操作
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="学习笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    学习笔记
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="主页" class="md-nav__link">
      主页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../ElasticSearch/" title="ElasticSearch" class="md-nav__link">
      ElasticSearch
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../JavaScript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../MySQL/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../人工智能/" title="人工智能" class="md-nav__link">
      人工智能
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../LEK/" title="LEK" class="md-nav__link">
      LEK
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../设计模式/" title="设计模式" class="md-nav__link">
      设计模式
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Linux/" title="Linux" class="md-nav__link">
      Linux
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#67-file" class="md-nav__link">
    67 File类基本操作
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#68-file" class="md-nav__link">
    68 File类操作深入
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#69" class="md-nav__link">
    69 获取文件信息
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#70" class="md-nav__link">
    70 综合案例：列出目录结构
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    71 综合案例：文件批量更名
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="15">第15 章 ： 文件操作</h1>
<h2 id="67-file">67 File类基本操作</h2>
<p>文件操作系统操作类：<br />
java.io.File</p>
<p>文件创建，删除，重命名</p>
<p>File类基本使用<br />
File 实现了Comparable接口</p>
<div class="codehilite"><pre><span></span><span class="c1">// 构造方法</span>
<span class="kd">public</span> <span class="nf">File</span><span class="o">(</span><span class="n">String</span> <span class="n">pathname</span><span class="o">)</span>
<span class="kd">public</span> <span class="nf">File</span><span class="o">(</span><span class="n">String</span> <span class="n">parent</span><span class="o">,</span> <span class="n">String</span> <span class="n">child</span><span class="o">)</span>

<span class="c1">// 创建文件</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">createNewFile</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span>

<span class="c1">// 文件存在</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">exists</span><span class="o">()</span>

<span class="c1">// 删除文件</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">delete</span><span class="o">()</span>
</pre></div>


<p>示例：</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./demo.txt&quot;</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()){</span>
            <span class="kt">boolean</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;删除结果：&quot;</span> <span class="o">+</span> <span class="n">ret</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="kt">boolean</span> <span class="n">ret</span> <span class="o">=</span>  <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;创建结果：&quot;</span> <span class="o">+</span> <span class="n">ret</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="68-file">68 File类操作深入</h2>
<p>1、路径分隔符<br />
Windows分隔符 "\"<br />
Linux分隔符  "/"<br />
路径分隔符常量 File.separator</p>
<p>2、文件操作流程</p>
<div class="codehilite"><pre><span></span><span class="err">程序</span> <span class="o">-&gt;</span> <span class="n">JVM</span> <span class="o">-&gt;</span> <span class="err">操作系统函数</span> <span class="o">-&gt;</span> <span class="err">文件处理</span>
</pre></div>


<p>重复删除或创建的时候会有延时情况，<br />
建议：文件名不要重名</p>
<p>3、创建文件的时候父级目录必须存在</p>
<div class="codehilite"><pre><span></span><span class="c1">// 获取父路径</span>
<span class="kd">public</span> <span class="n">File</span> <span class="nf">getParentFile</span><span class="o">()</span>

<span class="c1">// 创建目录</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">mkdirs</span><span class="o">()</span>
</pre></div>


<p>示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./dir/demo/demo.txt&quot;</span><span class="o">);</span>
        <span class="n">File</span> <span class="n">parentFile</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">parentFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">parentFile</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="69">69 获取文件信息</h2>
<p>涉及文件本身操作，不涉及文件内容处理</p>
<div class="codehilite"><pre><span></span><span class="c1">// 是否可读</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canRead</span><span class="o">()</span>

<span class="c1">// 是否可写</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canWrite</span><span class="o">()</span>

<span class="c1">// 是否可执行</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canExecute</span><span class="o">()</span>

<span class="c1">// 是否为文件</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFile</span><span class="o">()</span>

<span class="c1">// 是否为目录</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isDirectory</span><span class="o">()</span>

<span class="c1">// 获取文件长度 字节</span>
<span class="kd">public</span> <span class="kt">long</span> <span class="nf">length</span><span class="o">()</span>

<span class="c1">// 最后修改时间 13位时间戳</span>
<span class="kd">public</span> <span class="kt">long</span> <span class="nf">lastModified</span><span class="o">()</span>

<span class="c1">// 列出目录内容</span>
<span class="kd">public</span> <span class="n">File</span><span class="o">[]</span> <span class="nf">listFiles</span><span class="o">()</span>
</pre></div>


<p>示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./dir/demo&quot;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">canRead</span><span class="o">());</span> <span class="c1">// true</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">canWrite</span><span class="o">());</span>  <span class="c1">// true</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">canExecute</span><span class="o">());</span> <span class="c1">// false</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">());</span> <span class="c1">// true</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">());</span>  <span class="c1">// false</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>  <span class="c1">// 135 字节</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">lastModified</span><span class="o">());</span> <span class="c1">// 1574952161000</span>

        <span class="n">File</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">File</span> <span class="n">f</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">// ./dir/demo/demo.txt</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="70">70 综合案例：列出目录结构</h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./dir&quot;</span><span class="o">);</span>
        <span class="n">listDir</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">listDir</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">()){</span>
            <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>

            <span class="k">if</span><span class="o">(</span><span class="n">files</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">for</span><span class="o">(</span><span class="n">File</span> <span class="n">f</span><span class="o">:</span> <span class="n">files</span><span class="o">){</span>
                    <span class="n">listDir</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="71">71 综合案例：文件批量更名</h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;./dir&quot;</span><span class="o">);</span>
        <span class="n">renameDir</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>

        <span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;花费时间：&quot;</span> <span class="o">+</span> <span class="o">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">renameDir</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">()){</span>
            <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>

            <span class="k">if</span><span class="o">(</span><span class="n">files</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="k">for</span><span class="o">(</span><span class="n">File</span> <span class="n">f</span><span class="o">:</span> <span class="n">files</span><span class="o">){</span>
                    <span class="n">renameDir</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">)){</span>
                <span class="kt">int</span> <span class="n">endPos</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">);</span>
                <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">endPos</span><span class="o">);</span>

                <span class="n">File</span> <span class="n">newFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getParent</span><span class="o">(),</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;.txt&quot;</span><span class="o">);</span>

                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">newFile</span><span class="o">);</span>

                <span class="n">file</span><span class="o">.</span><span class="na">renameTo</span><span class="o">(</span><span class="n">newFile</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h1 id="16">第16章 字节流与字符流</h1>
<h2 id="72">72 流的基本概念</h2>
<p>File类是唯一一个与文件本身有关的程序处理类<br />
File类只能够操作文件本身，而不能操作文件内容</p>
<p>IO操作：输入输出操作</p>
<p>java.io 抽象类</p>
<div class="codehilite"><pre><span></span>        <span class="err">输出</span>            <span class="err">输入</span>
<span class="err">字节流：</span><span class="n">OutputStream</span><span class="p">,</span> <span class="n">InputStream</span>
<span class="err">字符流：</span><span class="n">Writer</span><span class="p">,</span>       <span class="n">Reader</span>
</pre></div>


<p>文件处理流程：<br />
1、File找到一个文件<br />
2、通过字节流或字符流的子类为父类对象实例化<br />
3、利用字节流或字符流中的方法实现数据出入与输出操作<br />
4、流的操作属于资源操作，资源操作必须进行关闭</p>
<h2 id="73-outputstream">73 OutputStream字节输出流</h2>
<p>实现代码</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AutoCloseable</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Closeable</span> <span class="kd">extends</span> <span class="n">AutoCloseable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Flushable</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">flush</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">OutputStream</span> 
    <span class="kd">implements</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">{</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[])</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// 子类</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileOutputStream</span> <span class="kd">extends</span> <span class="n">OutputStream</span><span class="o">{</span>
    <span class="c1">// 覆盖</span>
    <span class="kd">public</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span>

    <span class="c1">// 追加</span>
    <span class="kd">public</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">append</span><span class="o">)</span> 
        <span class="kd">throws</span> <span class="n">FileNotFoundException</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>内容输出到文件</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo/demo.txt&quot;</span><span class="o">);</span>

        <span class="c1">// 父级目录不存在则创建</span>
        <span class="k">if</span><span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">exists</span><span class="o">()){</span>
            <span class="n">file</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">mkdir</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;这是输出的内容&quot;</span><span class="o">;</span>

        <span class="c1">// 将字符串转换为字节数组输出到文件，并关闭文件</span>
        <span class="n">FileOutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>自动关闭的写法</p>
<div class="codehilite"><pre><span></span><span class="k">try</span><span class="o">(</span><span class="n">FileOutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">)){</span>
    <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">){</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>使用追加换行输出</p>
<div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;这是输出的内容\r\n&quot;</span><span class="o">;</span>

<span class="n">FileOutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></div>


<h2 id="74-inputstream">74 InputStream字节输入流</h2>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span><span class="o">{</span>
    <span class="c1">// 读取单个字节数据，读到文件底部返回-1</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>

    <span class="c1">// 读取一组字节数据，返回读取的个数，文件底部返回-1</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[])</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>


<p>文件尾部返回 -1， 表示文件读取完成</p>
<p>子类</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileInputStream</span> <span class="kd">extends</span> <span class="n">InputStream</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FileInputStream</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span>
    <span class="kd">public</span> <span class="nf">FileInputStream</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span>
<span class="o">}</span>
</pre></div>


<p>读取示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo/demo.txt&quot;</span><span class="o">);</span>

        <span class="n">FileInputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>

        <span class="c1">// 开辟缓冲区读取数据</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[&quot;</span>  <span class="o">+</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;]&quot;</span><span class="o">);</span>

        <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="75-writer">75 Writer字符输出流</h2>
<p>Writer可以直接输出字符串</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Writer</span> 
    <span class="kd">implements</span> <span class="n">Appendable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[])</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
    <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OutputStreamWriter</span> <span class="kd">extends</span> <span class="n">Writer</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileWriter</span> <span class="kd">extends</span> <span class="n">OutputStreamWriter</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FileWriter</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">append</span><span class="o">);</span>
    <span class="kd">public</span> <span class="nf">FileWriter</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nf">FileWriter</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nf">FileWriter</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">append</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>


<p>代码实例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo/demo.txt&quot;</span><span class="o">);</span>

        <span class="n">FileWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>

        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;hello java&quot;</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;你好！java!&quot;</span><span class="o">);</span>

        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="76-reader">76 Reader字符输入流</h2>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader</span> <span class="kd">implements</span> <span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputStreamReader</span> <span class="kd">extends</span> <span class="n">Reader</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileReader</span> <span class="kd">extends</span> <span class="n">InputStreamReader</span><span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FileReader</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
    <span class="kd">public</span> <span class="nf">FileReader</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">);</span>    
<span class="o">}</span>
</pre></div>


<p>读取示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo/demo.txt&quot;</span><span class="o">);</span>

        <span class="n">FileReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>

        <span class="kt">char</span><span class="o">[]</span> <span class="n">data</span><span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>

        <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>字符流读取只能按照数组数据读取</p>
<h2 id="77">77 字节流与字符流的区别</h2>
<p>不使用close关闭<br />
使用字节流输出 OutputStream 正常输出<br />
使用字符流输出 Writer 无法输出，使用了缓冲区</p>
<p>close会强制刷新缓冲区（flush）</p>
<p>字节流不使用缓冲区，字符流使用缓冲区</p>
<h2 id="78">78 转换流</h2>
<p>字节流与字符流操作的功能转换</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo/demo.txt&quot;</span><span class="o">);</span>

        <span class="c1">// 字节流转字符流操作</span>
        <span class="n">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">Writer</span> <span class="n">wirter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OutputStreamWriter</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>

        <span class="n">wirter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;你好&quot;</span><span class="o">);</span>

        <span class="n">wirter</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">OutputStream</span><span class="o">(</span><span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">FileOutputStream</span>

<span class="nf">InputStream</span><span class="o">(</span><span class="n">Closeable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">FileInputStream</span>

<span class="nf">Writer</span><span class="o">(</span><span class="n">Appendable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">OutputStreamWriter</span>
        <span class="o">-</span><span class="n">FileWriter</span>

<span class="nf">Reader</span><span class="o">(</span><span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">InputStreamReader</span>
        <span class="o">-</span><span class="n">FileReader</span>
</pre></div>


<p>缓存，程序中间缓冲区</p>
<p>字节数据：101010101...</p>
<h2 id="79">79 综合实战：文件拷贝</h2>
<p>实现文件拷贝操作<br />
使用字节流</p>
<p>方案一：<br />
    全部读取，一次性输出<br />
方法二：<br />
    每次读取一部分，输出一部分</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">FileUtil</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">copyFile</span><span class="o">(</span><span class="n">String</span> <span class="n">src</span><span class="o">,</span> <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>

        <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
        <span class="n">OutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>

        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">copyDir</span><span class="o">(</span><span class="n">String</span> <span class="n">src</span><span class="o">,</span> <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">srcFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
        <span class="n">File</span> <span class="n">targetFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">targetFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">targetFile</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">File</span><span class="o">[]</span> <span class="n">results</span> <span class="o">=</span> <span class="n">srcFile</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">results</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">File</span> <span class="n">file</span> <span class="o">:</span> <span class="n">results</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">targetFile</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">())</span> <span class="o">{</span>
                    <span class="n">copyDir</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getPath</span><span class="o">(),</span> <span class="n">fileName</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">copyFile</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getPath</span><span class="o">(),</span> <span class="n">fileName</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">FileUtil</span><span class="o">.</span><span class="na">copyDir</span><span class="o">(</span><span class="s">&quot;demo&quot;</span><span class="o">,</span> <span class="s">&quot;demo2&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;拷贝完成&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>如果拷贝目录则使用递归拷贝</p>
<h1 id="17-io">第17 章 ： IO操作深入</h1>
<h2 id="80">80 字符编码</h2>
<p>常用的编码<br />
1、GBK/GB2312 国标编码， GB2312简体中文，GBK包含简体和繁体<br />
2、ISO8859-1 国际通用编码，描述所有字母<br />
3、UNICODE 16进制存储，描述所有问题<br />
4、UTF 象形文字部分使用16进制，普通字母采用ISO8859-1，主要使用UTF-8</p>
<p>列出本机属性</p>
<div class="codehilite"><pre><span></span><span class="n">System</span><span class="o">.</span><span class="na">getProperties</span><span class="o">().</span><span class="na">list</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>
</pre></div>


<p>项目中出现乱码问题就是编码和解码标准不统一</p>
<h2 id="81">81 内存操作流</h2>
<p>文件操作流 以文件为操作终端，InputStream、OutputStream</p>
<p>内存操作流<br />
1、字节内存操作流 ByteArrayOutputStream ByteArrayInputStream<br />
2、字符内存操作流 CharArrayWriter CharArrayReader</p>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">OutputStream</span>
    <span class="o">-</span><span class="n">FileOutputStream</span>
    <span class="o">-</span><span class="n">ByteArrayOutputStream</span>

<span class="n">InputStream</span>
    <span class="o">-</span><span class="n">FileInputStream</span>
    <span class="o">-</span><span class="n">ByteArrayInputStream</span> 

<span class="n">Writer</span>
    <span class="o">-</span><span class="n">OutputStreamWriter</span>
        <span class="o">-</span><span class="n">FileWriter</span>
    <span class="o">-</span><span class="n">CharArrayWriter</span>

<span class="n">Reader</span>
    <span class="o">-</span><span class="n">InputStreamReader</span>
        <span class="o">-</span><span class="n">FileReader</span>
    <span class="o">-</span><span class="n">CharArrayReader</span>
</pre></div>


<p>示例：利用内存流小写转大写操作</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;hello java&quot;</span><span class="o">;</span>

        <span class="c1">// 将数据保存到内存流中</span>
        <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayInputStream</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="n">OutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>

        <span class="kt">int</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="c1">// 每次读取一个数据</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">data</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">())!=-</span><span class="mi">1</span><span class="o">){</span>
            <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">Character</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">output</span><span class="o">);</span>
        <span class="c1">// HELLO JAVA</span>

        <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="82">82 管道流</h2>
<div class="codehilite"><pre><span></span>发送信息 <span class="o">&lt;-</span> 管道 <span class="o">-&gt;</span> 接收信息
</pre></div>


<p>字节管道流 PipedInputStream, PipedOutputStream<br />
字符管道流 PipedReader, PipedWriter</p>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">InputStream</span>
    <span class="o">-</span><span class="n">PipedInputStream</span>

<span class="n">OutputStream</span>
    <span class="o">-</span><span class="n">PipedOutputStream</span>

<span class="n">Reader</span>
    <span class="o">-</span><span class="n">PipedReader</span>

<span class="n">Writer</span>
    <span class="o">-</span><span class="n">PipedWriter</span>
</pre></div>


<p>管道发送接收数据</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Sender</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">PipedOutputStream</span> <span class="n">output</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Sender</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PipedOutputStream</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;你好&quot;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PipedOutputStream</span> <span class="nf">getOutput</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">output</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Receiver</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">PipedInputStream</span> <span class="n">input</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Receiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PipedInputStream</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>
            <span class="c1">// 你好</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PipedInputStream</span> <span class="nf">getInput</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">input</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">Sender</span> <span class="n">sender</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sender</span><span class="o">();</span>
        <span class="n">Receiver</span> <span class="n">receiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Receiver</span><span class="o">();</span>

        <span class="c1">// 管道连接</span>
        <span class="n">sender</span><span class="o">.</span><span class="na">getOutput</span><span class="o">().</span><span class="na">connect</span><span class="o">(</span><span class="n">receiver</span><span class="o">.</span><span class="na">getInput</span><span class="o">());</span>

        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">sender</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
        <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">receiver</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="83-randomaccessfile">83 RandomAccessFile</h2>
<p>随机读取类，可以移动文件指针</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="nf">RandomAccessFile</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">mode</span><span class="o">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="c1">// 写入</span>
        <span class="n">RandomAccessFile</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomAccessFile</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">,</span> <span class="s">&quot;rw&quot;</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&quot;你好世界&quot;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="c1">// 读取</span>
        <span class="n">RandomAccessFile</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomAccessFile</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">,</span> <span class="s">&quot;rw&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h1 id="18">第18 章 ： 输入与输出支持</h1>
<h2 id="84">84 打印流</h2>
<p>设计思想：装饰设计模式<br />
为OutputStream 类实现一层包装<br />
PrintStream<br />
PrintWriter</p>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">OutputStream</span>
    <span class="o">-</span><span class="n">FilterOutputStream</span>
        <span class="o">-</span><span class="n">PrintStream</span>
<span class="n">Writer</span>
    <span class="o">-</span><span class="n">PrintWriter</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>

        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">));</span>

        <span class="c1">// 换行输出</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;你好&quot;</span><span class="o">);</span>

        <span class="c1">// 格式化输出</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;姓名 %s, 年龄: %s&quot;</span><span class="o">,</span> <span class="s">&quot;小强&quot;</span><span class="o">,</span> <span class="mi">23</span><span class="o">);</span>

        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>只要是文件内容输出时都使用打印流</p>
<h2 id="85-systemio">85 System类对IO的支持</h2>
<p>System是系统类<br />
1、标准输出（显示器）<br />
2、错误输出<br />
3、标准输入（键盘）</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">System</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// 黑色字体</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">PrintStream</span> <span class="n">err</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// 红色字体</span>
<span class="o">}</span>
</pre></div>


<p>修改输出位置</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintStream</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">setErr</span><span class="o">(</span><span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">))));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;你好&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>接收键盘输入（一般不用此方法）</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入姓名：&quot;</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="86-bufferedreader">86 BufferedReader缓冲输入流</h2>
<p>JDK &lt; 1.5</p>
<p>缓冲字符输入流<br />
继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">Reader</span>
    <span class="o">-</span><span class="n">BufferedReader</span>
</pre></div>


<p>代码示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入：&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="87-scanner">87 Scanner扫描流</h2>
<p>JDK &gt; 1.5<br />
替代BufferedReader</p>
<p>构造函数<br />
判断是否有数据 public boolean hasNext()<br />
读取数据      public String next()<br />
设置分隔符    </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入年龄：&quot;</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextInt</span><span class="o">()){</span>
            <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;您输入的年龄是：&quot;</span> <span class="o">+</span> <span class="n">age</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;输入不正确&quot;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>可以结合正则进行判断验证</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.text.ParseException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入生日：&quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">(</span><span class="s">&quot;\\d{4}-\\d{2}-\\d{2}&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="s">&quot;\\d{4}-\\d{2}-\\d{2}&quot;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;您输入的年龄是：&quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="n">msg</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;输入不正确&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>读取文件</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">));</span>

        <span class="c1">// 设置换行分隔符</span>
        <span class="c1">// scanner.useDelimiter(&quot;\n&quot;);</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>开发中:<br />
输出使用PrintWriter打印流<br />
输入使用Scanner扫描流</p>
<h1 id="19">第19 章 ： 对象序列化</h1>
<h2 id="88">88 对象序列化基本概念</h2>
<p>对象序列化：<br />
将内存中保存的对象以二进制数据的形式处理，<br />
实现对象的保存或者网络传输</p>
<div class="codehilite"><pre><span></span>                     <span class="err">保存到文件</span>
<span class="err">堆内存</span> <span class="o">-</span> <span class="err">二进制转换</span> <span class="o">-&gt;</span>  <span class="err">保存到数据库</span>
                     <span class="err">发送到服务器</span>
</pre></div>


<p>要序列化的对象必须实现java.io.Serializable 接口<br />
没有任何方法，只是描述一种能力</p>
<p>示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="89">89 序列化与反序列化处理</h2>
<p>继承关系</p>
<div class="codehilite"><pre><span></span><span class="n">InputStream</span><span class="o">(</span><span class="n">ObjectInput</span><span class="o">,</span> <span class="n">ObjectStreamConstants</span><span class="o">)</span>
    <span class="o">-</span><span class="n">ObjectInputStream</span>

<span class="nf">OutputStream</span><span class="o">(</span><span class="n">ObjectOutput</span><span class="o">,</span> <span class="n">ObjectStreamConstants</span><span class="o">)</span>
    <span class="o">-</span><span class="n">ObjectOutputStream</span>
</pre></div>


<p>代码示例</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">File</span>  <span class="n">SAVE_FILE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo.person&quot;</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&quot;Tom&quot;</span><span class="o">,</span> <span class="mi">23</span><span class="o">);</span>
        <span class="c1">// saveObject(person);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">loadObject</span><span class="o">());</span>
        <span class="c1">// Person@15aeb7ab</span>
    <span class="o">}</span>

    <span class="c1">// 序列化</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">saveObject</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">ObjectOutputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">SAVE_FILE</span><span class="o">));</span>
        <span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
        <span class="n">oos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 反序列化</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Object</span> <span class="nf">loadObject</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
        <span class="n">ObjectInputStream</span> <span class="n">ois</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">SAVE_FILE</span><span class="o">));</span>
        <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">ois</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
        <span class="n">ois</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>实际开发中不直接操作ObjectInputStream、ObjectOutputStream</p>
<h2 id="90-transient">90 transient关键字</h2>
<p>表示进行序列化处理时，不处理被transient关键字修饰的字段<br />
不常用，知道即可</p>
<p>IO继承体系整合</p>
<div class="codehilite"><pre><span></span><span class="c1">// 字节流：</span>
<span class="n">OutputStream</span><span class="o">(</span><span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">FileOutputStream</span>
    <span class="o">-</span><span class="n">ByteArrayOutputStream</span>
    <span class="o">-</span><span class="n">PipedOutputStream</span>
    <span class="o">-</span><span class="n">FilterOutputStream</span>
        <span class="o">-</span><span class="n">PrintStream</span>
    <span class="o">-</span><span class="n">ObjectOutputStream</span>


<span class="nf">InputStream</span><span class="o">(</span><span class="n">Closeable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">FileInputStream</span>
    <span class="o">-</span><span class="n">ByteArrayInputStream</span>
    <span class="o">-</span><span class="n">PipedInputStream</span>
    <span class="o">-</span><span class="n">ObjectInputStream</span>

<span class="c1">// 字符流：</span>
<span class="n">Writer</span><span class="o">(</span><span class="n">Appendable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">OutputStreamWriter</span>
        <span class="o">-</span><span class="n">FileWriter</span>      
    <span class="o">-</span><span class="n">CharArrayWriter</span>
    <span class="o">-</span><span class="n">PipedReader</span>
    <span class="o">-</span><span class="n">PrintWriter</span>
    <span class="o">-</span><span class="n">BufferedWriter</span>

<span class="nf">Reader</span><span class="o">(</span><span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">)</span>
    <span class="o">-</span><span class="n">InputStreamReader</span>
        <span class="o">-</span><span class="n">FileReader</span>
    <span class="o">-</span><span class="n">CharArrayReader</span>
    <span class="o">-</span><span class="n">PipedWriter</span>
    <span class="o">-</span><span class="n">BufferedReader</span>
</pre></div>


<h1 id="20-javaio">第20 章 ： JavaIO编程案例</h1>
<h2 id="91">91 数字大小比较</h2>
<p>输入3个整数，并求出3个整数最大值和最小值</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">InputUtil</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * 读取指定个数的整数输入</span>
<span class="cm">     *</span>
<span class="cm">     * @param num 指定要输入的整数个数</span>
<span class="cm">     * @return 所有读取的整数数组</span>
<span class="cm">     * @throws IOException</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getIntList</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入&quot;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">+</span> <span class="s">&quot;个整数：&quot;</span><span class="o">);</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">num</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="s">&quot;\\d+&quot;</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">list</span><span class="o">[</span><span class="n">count</span><span class="o">++]</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入整数&quot;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">NumberUtil</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * 获取int 型数组中最大值和最小值</span>
<span class="cm">     *</span>
<span class="cm">     * @param list 整数数组</span>
<span class="cm">     * @return int[] {max, min}</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">getMaxMin</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">max</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">min</span> <span class="o">&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">min</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="n">max</span><span class="o">,</span> <span class="n">min</span><span class="o">};</span>
    <span class="o">}</span>

<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>

        <span class="c1">// 读取3个数据</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getIntList</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">NumberUtil</span><span class="o">.</span><span class="na">getMaxMin</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;最大值：&quot;</span> <span class="o">+</span> <span class="n">data</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;最小值：&quot;</span> <span class="o">+</span> <span class="n">data</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="92">92 文件保存</h2>
<p>从键盘输入文件名和文件内容，然后将文件内容保存到文件中<br />
1、定义接口<br />
2、工具类<br />
3、实现接口类<br />
4、工厂类<br />
5、测试函数</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">InputUtil</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getInput</span><span class="o">(</span><span class="n">String</span> <span class="n">prompt</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">prompt</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(!</span><span class="s">&quot;&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">msg</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入非空字符串：&quot;</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IFileService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILE_DIR</span> <span class="o">=</span> <span class="s">&quot;demo&quot;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">save</span><span class="o">();</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">FileServiceImpl</span> <span class="kd">implements</span> <span class="n">IFileService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">filename</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">content</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">FileServiceImpl</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">filename</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getInput</span><span class="o">(</span><span class="s">&quot;请输入文件名&quot;</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getInput</span><span class="o">(</span><span class="s">&quot;请输入文件内容&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">fullname</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">FILE_DIR</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">filename</span><span class="o">;</span>

        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">fullname</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">content</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">writer</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Factory</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Factory</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">FileServiceImpl</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">FileServiceImpl</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="c1">// 项目启动时创建文件夹</span>
    <span class="kd">static</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">IFileService</span><span class="o">.</span><span class="na">FILE_DIR</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">file</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">FileServiceImpl</span> <span class="n">fileService</span> <span class="o">=</span> <span class="n">Factory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="n">fileService</span><span class="o">.</span><span class="na">save</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="93">93 字符串逆序显示</h2>
<p>键盘传入多个字符串到程序中，并将它们按照逆序输出到屏幕</p>
<p>设计考虑：<br />
1、字符串内容随时修改，使用StringBuffer<br />
2、由用户自己决定是否继续输入</p>
<p>实现步骤<br />
1、定义接口 操作标准<br />
2、定义实现类<br />
3、定义工厂类<br />
4、编写辅助类<br />
5、编写测试类</p>
<p>实现代码<br />
IStringService.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IStringService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">);</span>
    <span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">reverse</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>StringServiceImpl.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringServiceImpl</span> <span class="kd">implements</span> <span class="n">IStringService</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">StringBuffer</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">str</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;|&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">reverse</span><span class="o">(){</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\|&quot;</span><span class="o">);</span>

        <span class="n">String</span><span class="o">[]</span> <span class="n">tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>

        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="n">tmp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="n">list</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">tmp</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>InputUtil.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">InputUtil</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getString</span><span class="o">(</span><span class="n">String</span> <span class="n">prompt</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">prompt</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(!</span><span class="s">&quot;&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">msg</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;请输入非空字符串：&quot;</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Factory.java</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Factory</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Factory</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">StringServiceImpl</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">StringServiceImpl</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Menu.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Menu</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">StringServiceImpl</span> <span class="n">stringServiceImpl</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Menu</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">stringServiceImpl</span> <span class="o">=</span> <span class="n">Factory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">choose</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">help</span><span class="o">();</span>

        <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请选择：&quot;</span><span class="o">);</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="s">&quot;1&quot;</span><span class="o">:</span>
                <span class="k">this</span><span class="o">.</span><span class="na">stringServiceImpl</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入字符串：&quot;</span><span class="o">));</span>
                <span class="n">choose</span><span class="o">();</span>

            <span class="k">case</span> <span class="s">&quot;2&quot;</span><span class="o">:</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">stringServiceImpl</span><span class="o">.</span><span class="na">reverse</span><span class="o">()));</span>
                <span class="n">choose</span><span class="o">();</span>

                <span class="k">case</span> <span class="s">&quot;0&quot;</span><span class="o">:</span>
                <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

<span class="nl">            default:</span>
                <span class="n">choose</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">help</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[1]输入内容：&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[2]输出反转内容：&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[0]退出&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Demo.java</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Demo</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">Menu</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="94">94 数据排序处理</h2>
<p>键盘输入数据 <code>姓名:成绩|姓名:成绩</code></p>
<p>eg:</p>
<div class="codehilite"><pre><span></span><span class="n">Tom</span><span class="o">:</span><span class="mi">89</span><span class="o">|</span><span class="n">Jack</span><span class="o">:</span><span class="mi">91</span><span class="o">|</span><span class="n">Tony</span><span class="o">:</span><span class="mi">86</span>
</pre></div>


<p>按照成绩由高到低排序</p>
<p>思路：<br />
Comparable + Arrays</p>
<p>代码实现<br />
IStudentService.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IStudentService</span> <span class="o">{</span>
    <span class="n">Student</span><span class="o">[]</span> <span class="nf">getData</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>Student.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">score</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">double</span> <span class="n">score</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Student&lt;&quot;</span> <span class="o">+</span>  <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">score</span> <span class="o">+</span> <span class="sc">&#39;&gt;&#39;</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Student</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">score</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">score</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>StudentServiceImpl.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StudentServiceImpl</span> <span class="kd">implements</span> <span class="n">IStudentService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Student</span><span class="o">[]</span> <span class="n">students</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">StudentServiceImpl</span><span class="o">(</span><span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">handle</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(){</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">content</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\|&quot;</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">[</span><span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>

        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">list</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="n">String</span><span class="o">[]</span> <span class="n">items</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="n">items</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">items</span><span class="o">[</span><span class="mi">1</span><span class="o">]));</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Student</span><span class="o">[]</span> <span class="nf">getData</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Factory.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Factory</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">StudentServiceImpl</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">StudentServiceImpl</span><span class="o">(</span><span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入数据：&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Demo.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Tom:89|Jack:91|Tony:86</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Factory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getData</span><span class="o">()));</span>
        <span class="c1">// [Student&lt;Jack, 91.0&gt;, Student&lt;Tom, 89.0&gt;, Student&lt;Tony, 86.0&gt;]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="95">95 数据排序处理深入</h2>
<p>扩展上一节内容，将输入信息保存到文件中，还可以添加信息，并且查看全部数据</p>
<p>确认保存位置<br />
格式统一</p>
<p>FileUtil.java文件读取工具类</p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">util</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileUtil</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">read</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">StringBuilder</span> <span class="n">contents</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">contents</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="kc">true</span><span class="o">));</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">PrintWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
        <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;demo.txt&quot;</span><span class="o">);</span>

        <span class="n">FileUtil</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="s">&quot;你好&quot;</span><span class="o">);</span>
        <span class="n">FileUtil</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="s">&quot;你也好&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">FileUtil</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">file</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="96">96 奇偶数统计</h2>
<p>输入字符串拆分后统计奇数，偶数个数</p>
<p>接口INumberService.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">INumberService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">handle</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>实现类 NumberServiceImpl.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">util.InputUtil</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberServiceImpl</span> <span class="kd">implements</span> <span class="n">INumberService</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">str</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NumberServiceImpl</span><span class="o">(){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">str</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入数字串：&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">handle</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">String</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">str</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>

        <span class="c1">// 偶数， 奇数</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">};</span>
        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">num</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">num</span><span class="o">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span>
                <span class="n">result</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">++;</span>
            <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                <span class="n">result</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>测试类 Demo.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="k">new</span> <span class="n">NumberServiceImpl</span><span class="o">().</span><span class="na">handle</span><span class="o">()));</span>

        <span class="c1">// 1234567890</span>
        <span class="c1">// [5, 5]</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="97">97 用户登录</h2>
<p>输入用户名和密码 root 123456<br />
如果没有输入则提示输入<br />
输入错误3次退出<br />
提示登录成功</p>
<p>真实业务只实现核心功能，辅助逻辑处理交给代理控制</p>
<p>接口类<br />
IUserService<br />
    isExit<br />
    login</p>
<p>实现类<br />
UserServiceImpl</p>
<p>代理类<br />
UserServiceProxy</p>
<p>工厂类<br />
Factory</p>
<p>测试类<br />
Demo</p>
<p>实现代码<br />
IUserService.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IUserService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isExit</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">login</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>


<p>UserServiceImpl.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceImpl</span> <span class="kd">implements</span> <span class="n">IUserService</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">tryCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isExit</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// 超过三次错误</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">tryCount</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 实现核心逻辑</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">login</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tryCount</span> <span class="o">++;</span>

        <span class="k">if</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="s">&quot;123456&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">password</span><span class="o">)){</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>UserServiceProxy.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">util.InputUtil</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceProxy</span> <span class="kd">implements</span> <span class="n">IUserService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">IUserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserServiceProxy</span><span class="o">(</span><span class="n">IUserService</span> <span class="n">userService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userService</span> <span class="o">=</span> <span class="n">userService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isExit</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">userService</span><span class="o">.</span><span class="na">isExit</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 实现辅助逻辑</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">login</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">while</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">isExit</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">inputName</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入用户名：&quot;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">inputPassword</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入密码：&quot;</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">userService</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">inputName</span><span class="o">,</span> <span class="n">inputPassword</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;登录成功&quot;</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;用户名或密码错误，请重试&quot;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;重试次数过多，请稍后重试&quot;</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Factory.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">util.InputUtil</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Factory</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">IUserService</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">UserServiceProxy</span><span class="o">(</span><span class="k">new</span> <span class="n">UserServiceImpl</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Demo.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Factory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">login</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<h2 id="98">98 投票选举</h2>
<p>1、输入候选人名单<br />
2、统计每个候选人票数<br />
3、显示最终投票结果<br />
思路分析</p>
<div class="codehilite"><pre><span></span><span class="mi">1</span><span class="err">、定义数据结构：</span>
<span class="n">Student</span>
    <span class="n">name</span>
    <span class="n">sid</span>
    <span class="n">vote</span>

<span class="mi">2</span><span class="err">、操作接口类</span>
<span class="n">IVoteService</span>
    <span class="n">void</span> <span class="n">inc</span><span class="p">(</span><span class="nb">int</span> <span class="n">sid</span><span class="p">)</span>
    <span class="n">Student</span><span class="p">[]</span> <span class="k">result</span><span class="p">()</span> <span class="err">排序数据</span>
    <span class="n">Student</span><span class="p">[]</span> <span class="n">getData</span><span class="p">()</span> <span class="err">未排序数据</span>

<span class="mi">3</span><span class="err">、实现类</span>
<span class="n">VoteServiceImpl</span>

<span class="mi">4</span><span class="err">、工厂类</span>
<span class="n">Factory</span>

<span class="mi">5</span><span class="err">、测试类</span>
<span class="n">Demo</span>
</pre></div>


<p>实现代码</p>
<p>数据结构 Student.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">sid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">vote</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sid</span><span class="o">,</span> <span class="kt">int</span> <span class="n">vote</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sid</span> <span class="o">=</span> <span class="n">sid</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">vote</span> <span class="o">=</span> <span class="n">vote</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSid</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">sid</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSid</span><span class="o">(</span><span class="kt">int</span> <span class="n">sid</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sid</span> <span class="o">=</span> <span class="n">sid</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getVote</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">vote</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setVote</span><span class="o">(</span><span class="kt">int</span> <span class="n">vote</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">vote</span> <span class="o">=</span> <span class="n">vote</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Student</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="na">vote</span> <span class="o">-</span> <span class="k">this</span><span class="o">.</span><span class="na">vote</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;[%s] %s - %s&quot;</span><span class="o">,</span> <span class="n">sid</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">vote</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>接口 IVoteService.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IVoteService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">inc</span><span class="o">(</span><span class="kt">int</span> <span class="n">sid</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">Student</span> <span class="nf">result</span><span class="o">();</span>

    <span class="kd">public</span> <span class="n">Student</span><span class="o">[]</span> <span class="nf">getData</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>实现类 VoteServiceImpl.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">util.InputUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VoteServiceImpl</span> <span class="kd">implements</span> <span class="n">IVoteService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Student</span><span class="o">[]</span> <span class="n">students</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">VoteServiceImpl</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">[]{</span>
                <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;张三&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;李四&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&quot;王五&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">inc</span><span class="o">(</span><span class="kt">int</span> <span class="n">sid</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span><span class="o">(</span><span class="n">Student</span> <span class="n">s</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">getSid</span><span class="o">()</span> <span class="o">==</span> <span class="n">sid</span><span class="o">){</span>
                <span class="n">s</span><span class="o">.</span><span class="na">setVote</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">getVote</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Student</span> <span class="nf">result</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Student</span><span class="o">[]</span> <span class="nf">getData</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">students</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>工产类 Factory.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Factory</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Factory</span><span class="o">(){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">IVoteService</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">VoteServiceImpl</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>菜单类 Menu.java</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">util.InputUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Menu</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">IVoteService</span> <span class="n">voteService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Menu</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">voteService</span> <span class="o">=</span> <span class="n">Factory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">choose</span><span class="o">(){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">help</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">num</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请选择：&quot;</span><span class="o">);</span>

        <span class="k">switch</span> <span class="o">(</span><span class="n">num</span><span class="o">){</span>
            <span class="k">case</span> <span class="s">&quot;1&quot;</span><span class="o">:</span>
                <span class="n">String</span> <span class="n">sid</span> <span class="o">=</span> <span class="n">InputUtil</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;请输入候选人id&quot;</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="na">voteService</span><span class="o">.</span><span class="na">inc</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">sid</span><span class="o">));</span>
                <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">&quot;2&quot;</span><span class="o">:</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">voteService</span><span class="o">.</span><span class="na">getData</span><span class="o">()));</span>
                <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">&quot;3&quot;</span><span class="o">:</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">voteService</span><span class="o">.</span><span class="na">result</span><span class="o">());</span>
                <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">&quot;0&quot;</span><span class="o">:</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;拜拜...&quot;</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="n">help</span><span class="o">();</span>
                <span class="k">this</span><span class="o">.</span><span class="na">choose</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">help</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;【1】候选人增加票数&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;【2】显示投票统计&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;【3】显示统计结果&quot;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;【0】退出系统&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>测试类 Demo.java</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Demo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">Menu</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2019-2020
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/mouday" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>